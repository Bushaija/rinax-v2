openapi: 3.0.0
info:
  version: 1.0.0
  title: Budget Monitoring API
components:
  schemas: {}
  parameters: {}
paths:
  /api/auth/sign-up:
    post:
      tags:
        - auth
      requestBody:
        description: User registration data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                email:
                  type: string
                  format: email
                password:
                  type: string
                  minLength: 8
                role:
                  type: string
                  enum:
                    - admin
                    - superadmin
                facilityId:
                  type: number
              required:
                - name
                - email
                - password
      responses:
        "201":
          description: User registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                      facilityId:
                        type: number
                        nullable: true
                      permissions:
                        type: object
                        nullable: true
                        additionalProperties:
                          nullable: true
                      projectAccess:
                        type: array
                        nullable: true
                        items:
                          type: number
                      isActive:
                        type: boolean
                      lastLoginAt:
                        type: string
                        nullable: true
                    required:
                      - id
                      - name
                      - email
                      - role
                      - facilityId
                      - permissions
                      - projectAccess
                      - isActive
                      - lastLoginAt
                  session:
                    type: object
                    properties:
                      id:
                        type: string
                      token:
                        type: string
                      expiresAt:
                        type: string
                    required:
                      - id
                      - token
                      - expiresAt
                required:
                  - user
                  - session
        "400":
          description: Invalid input data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "409":
          description: User already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/auth/sign-in:
    post:
      tags:
        - auth
      requestBody:
        description: User login credentials
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  minLength: 1
                rememberMe:
                  type: boolean
              required:
                - email
                - password
      responses:
        "200":
          description: Signed in successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                      facilityId:
                        type: number
                        nullable: true
                      permissions:
                        type: object
                        nullable: true
                        additionalProperties:
                          nullable: true
                      projectAccess:
                        type: array
                        nullable: true
                        items:
                          type: number
                      isActive:
                        type: boolean
                      lastLoginAt:
                        type: string
                        nullable: true
                    required:
                      - id
                      - name
                      - email
                      - role
                      - facilityId
                      - permissions
                      - projectAccess
                      - isActive
                      - lastLoginAt
                  session:
                    type: object
                    properties:
                      id:
                        type: string
                      token:
                        type: string
                      expiresAt:
                        type: string
                    required:
                      - id
                      - token
                      - expiresAt
                  mustChangePassword:
                    type: boolean
                  message:
                    type: string
                required:
                  - user
                  - session
        "401":
          description: Invalid credentials
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "403":
          description: Account deactivated
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/auth/sign-out:
    post:
      tags:
        - auth
      responses:
        "200":
          description: Signed out successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/auth/session:
    get:
      tags:
        - auth
      responses:
        "200":
          description: Current session
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                      facilityId:
                        type: number
                        nullable: true
                      permissions:
                        type: object
                        nullable: true
                        additionalProperties:
                          nullable: true
                      projectAccess:
                        type: array
                        nullable: true
                        items:
                          type: number
                      isActive:
                        type: boolean
                      lastLoginAt:
                        type: string
                        nullable: true
                    required:
                      - id
                      - name
                      - email
                      - role
                      - facilityId
                      - permissions
                      - projectAccess
                      - isActive
                      - lastLoginAt
                  session:
                    type: object
                    properties:
                      id:
                        type: string
                      token:
                        type: string
                      expiresAt:
                        type: string
                    required:
                      - id
                      - token
                      - expiresAt
                  mustChangePassword:
                    type: boolean
                required:
                  - user
                  - session
        "401":
          description: Not authenticated
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "403":
          description: Account deactivated
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/auth/profile:
    put:
      tags:
        - auth
      requestBody:
        description: Profile update data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                email:
                  type: string
                  format: email
                currentPassword:
                  type: string
                newPassword:
                  type: string
                  minLength: 8
      responses:
        "200":
          description: Profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                      facilityId:
                        type: number
                        nullable: true
                      permissions:
                        type: object
                        nullable: true
                        additionalProperties:
                          nullable: true
                      projectAccess:
                        type: array
                        nullable: true
                        items:
                          type: number
                      isActive:
                        type: boolean
                      lastLoginAt:
                        type: string
                        nullable: true
                    required:
                      - id
                      - name
                      - email
                      - role
                      - facilityId
                      - permissions
                      - projectAccess
                      - isActive
                      - lastLoginAt
                  message:
                    type: string
                required:
                  - user
                  - message
        "400":
          description: Invalid input data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/auth/forgot-password:
    post:
      tags:
        - auth
      requestBody:
        description: Email for password reset
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
              required:
                - email
      responses:
        "200":
          description: Password reset email sent
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "400":
          description: Invalid email
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/auth/reset-password:
    post:
      tags:
        - auth
      requestBody:
        description: Password reset data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                newPassword:
                  type: string
                  minLength: 8
              required:
                - email
                - newPassword
      responses:
        "200":
          description: Password reset successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "400":
          description: Invalid data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/auth/verify-email:
    post:
      tags:
        - auth
      requestBody:
        description: Email verification data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                otp:
                  type: string
                  minLength: 6
                  maxLength: 6
              required:
                - email
                - otp
      responses:
        "200":
          description: Email verification handled by administrators
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/admin/users:
    post:
      tags:
        - admin
      requestBody:
        description: User creation data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                email:
                  type: string
                  format: email
                role:
                  type: string
                  enum:
                    - accountant
                    - program_manager
                  default: accountant
                facilityId:
                  type: number
                permissions:
                  type: object
                  additionalProperties:
                    nullable: true
                projectAccess:
                  type: array
                  items:
                    type: number
                sendWelcomeEmail:
                  type: boolean
                  default: true
              required:
                - name
                - email
      responses:
        "201":
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                      facilityId:
                        type: number
                        nullable: true
                      isActive:
                        type: boolean
                      lastLoginAt:
                        type: string
                        nullable: true
                      createdAt:
                        type: string
                      createdBy:
                        type: number
                        nullable: true
                      mustChangePassword:
                        type: boolean
                    required:
                      - id
                      - name
                      - email
                      - role
                      - facilityId
                      - isActive
                      - lastLoginAt
                      - createdAt
                      - createdBy
                      - mustChangePassword
                  temporaryPassword:
                    type: string
                  message:
                    type: string
                required:
                  - user
                  - temporaryPassword
                  - message
        "400":
          description: Invalid input data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "409":
          description: User already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
    get:
      tags:
        - admin
      parameters:
        - schema:
            type: string
          required: false
          name: page
          in: query
        - schema:
            type: string
          required: false
          name: limit
          in: query
        - schema:
            type: string
            enum:
              - accountant
              - admin
              - program_manager
          required: false
          name: role
          in: query
        - schema:
            type: string
          required: false
          name: facilityId
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
          required: false
          name: isActive
          in: query
        - schema:
            type: string
          required: false
          name: search
          in: query
      responses:
        "200":
          description: Users list
          content:
            application/json:
              schema:
                type: object
                properties:
                  users:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        email:
                          type: string
                        role:
                          type: string
                          enum:
                            - accountant
                            - admin
                            - program_manager
                        facilityId:
                          type: number
                          nullable: true
                        isActive:
                          type: boolean
                        lastLoginAt:
                          type: string
                          nullable: true
                        createdAt:
                          type: string
                        createdBy:
                          type: number
                          nullable: true
                        mustChangePassword:
                          type: boolean
                      required:
                        - id
                        - name
                        - email
                        - role
                        - facilityId
                        - isActive
                        - lastLoginAt
                        - createdAt
                        - createdBy
                        - mustChangePassword
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                required:
                  - users
                  - pagination
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/admin/users/{userId}:
    get:
      tags:
        - admin
      parameters:
        - schema:
            type: string
          required: true
          name: userId
          in: path
      responses:
        "200":
          description: User details
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                  name:
                    type: string
                  email:
                    type: string
                  role:
                    type: string
                    enum:
                      - accountant
                      - admin
                      - program_manager
                  facilityId:
                    type: number
                    nullable: true
                  isActive:
                    type: boolean
                  lastLoginAt:
                    type: string
                    nullable: true
                  createdAt:
                    type: string
                  createdBy:
                    type: number
                    nullable: true
                  mustChangePassword:
                    type: boolean
                required:
                  - id
                  - name
                  - email
                  - role
                  - facilityId
                  - isActive
                  - lastLoginAt
                  - createdAt
                  - createdBy
                  - mustChangePassword
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
    put:
      tags:
        - admin
      parameters:
        - schema:
            type: string
          required: true
          name: userId
          in: path
      requestBody:
        description: User update data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                email:
                  type: string
                  format: email
                role:
                  type: string
                  enum:
                    - accountant
                    - program_manager
                facilityId:
                  type: number
                  nullable: true
                permissions:
                  type: object
                  additionalProperties:
                    nullable: true
                projectAccess:
                  type: array
                  items:
                    type: number
      responses:
        "200":
          description: User updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                  name:
                    type: string
                  email:
                    type: string
                  role:
                    type: string
                    enum:
                      - accountant
                      - admin
                      - program_manager
                  facilityId:
                    type: number
                    nullable: true
                  isActive:
                    type: boolean
                  lastLoginAt:
                    type: string
                    nullable: true
                  createdAt:
                    type: string
                  createdBy:
                    type: number
                    nullable: true
                  mustChangePassword:
                    type: boolean
                required:
                  - id
                  - name
                  - email
                  - role
                  - facilityId
                  - isActive
                  - lastLoginAt
                  - createdAt
                  - createdBy
                  - mustChangePassword
        "400":
          description: Invalid input data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
    delete:
      tags:
        - admin
      parameters:
        - schema:
            type: string
          required: true
          name: userId
          in: path
      responses:
        "200":
          description: User deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/admin/users/{userId}/status:
    patch:
      tags:
        - admin
      parameters:
        - schema:
            type: string
          required: true
          name: userId
          in: path
      requestBody:
        description: User status change
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isActive:
                  type: boolean
                reason:
                  type: string
              required:
                - isActive
      responses:
        "200":
          description: User status updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                      facilityId:
                        type: number
                        nullable: true
                      isActive:
                        type: boolean
                      lastLoginAt:
                        type: string
                        nullable: true
                      createdAt:
                        type: string
                      createdBy:
                        type: number
                        nullable: true
                      mustChangePassword:
                        type: boolean
                    required:
                      - id
                      - name
                      - email
                      - role
                      - facilityId
                      - isActive
                      - lastLoginAt
                      - createdAt
                      - createdBy
                      - mustChangePassword
                  message:
                    type: string
                required:
                  - user
                  - message
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/admin/users/{userId}/reset-password:
    post:
      tags:
        - admin
      parameters:
        - schema:
            type: string
          required: true
          name: userId
          in: path
      requestBody:
        description: Password reset options
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                sendEmail:
                  type: boolean
                  default: true
      responses:
        "200":
          description: Password reset successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  temporaryPassword:
                    type: string
                  message:
                    type: string
                required:
                  - temporaryPassword
                  - message
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/admin/users/{userId}/activity:
    get:
      tags:
        - admin
      parameters:
        - schema:
            type: string
          required: true
          name: userId
          in: path
        - schema:
            type: string
          required: false
          name: page
          in: query
        - schema:
            type: string
          required: false
          name: limit
          in: query
        - schema:
            type: string
          required: false
          name: startDate
          in: query
        - schema:
            type: string
          required: false
          name: endDate
          in: query
      responses:
        "200":
          description: User activity logs
          content:
            application/json:
              schema:
                type: object
                properties:
                  logs:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        action:
                          type: string
                        details:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        createdAt:
                          type: string
                        ipAddress:
                          type: string
                          nullable: true
                        userAgent:
                          type: string
                          nullable: true
                      required:
                        - id
                        - action
                        - details
                        - createdAt
                        - ipAddress
                        - userAgent
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                required:
                  - logs
                  - pagination
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/admin/users/bulk:
    post:
      tags:
        - admin
      requestBody:
        description: Bulk operation data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                operation:
                  type: string
                  enum:
                    - activate
                    - deactivate
                    - delete
                    - reset_password
                userIds:
                  type: array
                  items:
                    type: number
                  minItems: 1
                reason:
                  type: string
              required:
                - operation
                - userIds
      responses:
        "200":
          description: Bulk operation completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: array
                    items:
                      type: number
                  failed:
                    type: array
                    items:
                      type: object
                      properties:
                        userId:
                          type: number
                        reason:
                          type: string
                      required:
                        - userId
                        - reason
                  message:
                    type: string
                required:
                  - success
                  - failed
                  - message
        "400":
          description: Invalid operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  /api/admin/stats:
    get:
      tags:
        - admin
      responses:
        "200":
          description: System statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  users:
                    type: object
                    properties:
                      total:
                        type: number
                      active:
                        type: number
                      inactive:
                        type: number
                      byRole:
                        type: object
                        additionalProperties:
                          type: number
                    required:
                      - total
                      - active
                      - inactive
                      - byRole
                  facilities:
                    type: object
                    properties:
                      total:
                        type: number
                      byType:
                        type: object
                        additionalProperties:
                          type: number
                    required:
                      - total
                      - byType
                  projects:
                    type: object
                    properties:
                      total:
                        type: number
                      active:
                        type: number
                      byType:
                        type: object
                        additionalProperties:
                          type: number
                    required:
                      - total
                      - active
                      - byType
                  recentActivity:
                    type: array
                    items:
                      type: object
                      properties:
                        action:
                          type: string
                        user:
                          type: string
                        timestamp:
                          type: string
                        details:
                          type: string
                      required:
                        - action
                        - user
                        - timestamp
                required:
                  - users
                  - facilities
                  - projects
                  - recentActivity
        "403":
          description: Insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
  



  /api/analytics/budget-execution-rates:
    get:
      tags:
        - analytics
      parameters:
        - schema:
            type: integer
          required: false
          name: projectId
          in: query
        - schema:
            type: integer
          required: false
          name: facilityId
          in: query
        - schema:
            type: integer
          required: false
          name: reportingPeriodId
          in: query
        - schema:
            type: string
            enum:
              - project
              - facility
              - category
              - quarter
            default: project
          required: false
          name: groupBy
          in: query
        - schema:
            type: string
            format: date-time
          required: false
          name: fromDate
          in: query
        - schema:
            type: string
            format: date-time
          required: false
          name: toDate
          in: query
      responses:
        "200":
          description: Budget execution rates
          content:
            application/json:
              schema:
                type: object
                properties:
                  overall:
                    type: object
                    properties:
                      planned:
                        type: number
                      executed:
                        type: number
                      rate:
                        type: number
                      variance:
                        type: number
                    required:
                      - planned
                      - executed
                      - rate
                      - variance
                  breakdown:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
                        planned:
                          type: number
                        executed:
                          type: number
                        rate:
                          type: number
                        variance:
                          type: number
                        trend:
                          type: string
                          enum:
                            - up
                            - down
                            - stable
                      required:
                        - id
                        - name
                        - planned
                        - executed
                        - rate
                        - variance
                        - trend
                  byQuarter:
                    type: object
                    properties:
                      q1:
                        type: object
                        properties:
                          planned:
                            type: number
                          executed:
                            type: number
                          rate:
                            type: number
                        required:
                          - planned
                          - executed
                          - rate
                      q2:
                        type: object
                        properties:
                          planned:
                            type: number
                          executed:
                            type: number
                          rate:
                            type: number
                        required:
                          - planned
                          - executed
                          - rate
                      q3:
                        type: object
                        properties:
                          planned:
                            type: number
                          executed:
                            type: number
                          rate:
                            type: number
                        required:
                          - planned
                          - executed
                          - rate
                      q4:
                        type: object
                        properties:
                          planned:
                            type: number
                          executed:
                            type: number
                          rate:
                            type: number
                        required:
                          - planned
                          - executed
                          - rate
                    required:
                      - q1
                      - q2
                      - q3
                      - q4
                required:
                  - overall
                  - breakdown
                  - byQuarter
  
  /api/computation/calculate-values:
    post:
      tags:
        - computation
      requestBody:
        description: Data and formulas for calculation
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schemaId:
                  type: integer
                data:
                  type: object
                  additionalProperties:
                    nullable: true
                calculations:
                  type: array
                  items:
                    type: object
                    properties:
                      fieldId:
                        type: string
                      formula:
                        type: string
                      dependencies:
                        type: array
                        items:
                          type: string
                    required:
                      - fieldId
                      - formula
                      - dependencies
              required:
                - schemaId
                - data
      responses:
        "200":
          description: Calculated values with trace
          content:
            application/json:
              schema:
                type: object
                properties:
                  computedValues:
                    type: object
                    additionalProperties:
                      nullable: true
                  calculationTrace:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldId:
                          type: string
                        formula:
                          type: string
                        inputs:
                          type: object
                          additionalProperties:
                            nullable: true
                        result:
                          nullable: true
                        executionTime:
                          type: number
                        error:
                          type: string
                      required:
                        - fieldId
                        - formula
                        - inputs
                        - executionTime
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldId:
                          type: string
                        message:
                          type: string
                        code:
                          type: string
                      required:
                        - fieldId
                        - message
                        - code
                  warnings:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldId:
                          type: string
                        message:
                          type: string
                        code:
                          type: string
                      required:
                        - fieldId
                        - message
                        - code
                required:
                  - computedValues
                  - calculationTrace
                  - errors
                  - warnings
        "400":
          description: Calculation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: string
                required:
                  - message
                  - errors
  /api/computation/aggregate-totals:
    post:
      tags:
        - computation
      requestBody:
        description: Data for aggregation
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: array
                  items:
                    type: object
                    additionalProperties:
                      nullable: true
                aggregationRules:
                  type: array
                  items:
                    type: object
                    properties:
                      fieldId:
                        type: string
                      aggregationType:
                        type: string
                        enum:
                          - SUM
                          - AVERAGE
                          - COUNT
                          - MIN
                          - MAX
                          - MEDIAN
                      sourceFields:
                        type: array
                        items:
                          type: string
                      filters:
                        type: object
                        additionalProperties:
                          nullable: true
                    required:
                      - fieldId
                      - aggregationType
                      - sourceFields
              required:
                - data
                - aggregationRules
      responses:
        "200":
          description: Aggregated totals
          content:
            application/json:
              schema:
                type: object
                properties:
                  aggregatedValues:
                    type: object
                    additionalProperties:
                      type: number
                  itemCount:
                    type: number
                  processedFields:
                    type: array
                    items:
                      type: string
                required:
                  - aggregatedValues
                  - itemCount
                  - processedFields
  /api/computation/variance-analysis:
    post:
      tags:
        - computation
      requestBody:
        description: Planned vs actual data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                plannedData:
                  type: object
                  additionalProperties:
                    nullable: true
                actualData:
                  type: object
                  additionalProperties:
                    nullable: true
                analysisType:
                  type: string
                  enum:
                    - budget_vs_actual
                    - quarter_vs_quarter
                    - year_over_year
                toleranceThreshold:
                  type: number
                  default: 0.05
              required:
                - plannedData
                - actualData
                - analysisType
      responses:
        "200":
          description: Variance analysis results
          content:
            application/json:
              schema:
                type: object
                properties:
                  summary:
                    type: object
                    properties:
                      totalVariance:
                        type: number
                      averageVariance:
                        type: number
                      significantVariances:
                        type: number
                      overBudgetItems:
                        type: number
                      underBudgetItems:
                        type: number
                    required:
                      - totalVariance
                      - averageVariance
                      - significantVariances
                      - overBudgetItems
                      - underBudgetItems
                  fieldAnalysis:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldId:
                          type: string
                        planned:
                          type: number
                        actual:
                          type: number
                        variance:
                          type: number
                        percentageVariance:
                          type: number
                        isSignificant:
                          type: boolean
                        status:
                          type: string
                          enum:
                            - over_budget
                            - under_budget
                            - on_track
                      required:
                        - fieldId
                        - planned
                        - actual
                        - variance
                        - percentageVariance
                        - isSignificant
                        - status
                  recommendations:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldId:
                          type: string
                        priority:
                          type: string
                          enum:
                            - high
                            - medium
                            - low
                        message:
                          type: string
                        suggestedAction:
                          type: string
                      required:
                        - fieldId
                        - priority
                        - message
                        - suggestedAction
                required:
                  - summary
                  - fieldAnalysis
                  - recommendations
  /api/computation/validate-formula:
    post:
      tags:
        - computation
      requestBody:
        description: Formula to validate
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                formula:
                  type: string
                context:
                  type: object
                  properties:
                    availableFields:
                      type: array
                      items:
                        type: string
                    functions:
                      type: array
                      items:
                        type: string
                    testData:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - availableFields
              required:
                - formula
                - context
      responses:
        "200":
          description: Formula validation results
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  syntax:
                    type: object
                    properties:
                      isValidSyntax:
                        type: boolean
                      syntaxErrors:
                        type: array
                        items:
                          type: string
                    required:
                      - isValidSyntax
                      - syntaxErrors
                  dependencies:
                    type: object
                    properties:
                      requiredFields:
                        type: array
                        items:
                          type: string
                      missingFields:
                        type: array
                        items:
                          type: string
                      circularDependencies:
                        type: array
                        items:
                          type: string
                    required:
                      - requiredFields
                      - missingFields
                      - circularDependencies
                  testResult:
                    type: object
                    properties:
                      result:
                        nullable: true
                      executionTime:
                        type: number
                      error:
                        type: string
                    required:
                      - executionTime
                  warnings:
                    type: array
                    items:
                      type: string
                required:
                  - isValid
                  - syntax
                  - dependencies
                  - warnings
  /api/computation/financial-ratios:
    post:
      tags:
        - computation
      requestBody:
        description: Data for financial ratio calculation
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
                  additionalProperties:
                    nullable: true
                ratios:
                  type: array
                  items:
                    type: string
                    enum:
                      - current_ratio
                      - quick_ratio
                      - debt_to_equity
                      - return_on_assets
                      - budget_execution_rate
                      - expenditure_ratio
                      - surplus_ratio
              required:
                - data
                - ratios
      responses:
        "200":
          description: Financial ratios analysis
          content:
            application/json:
              schema:
                type: object
                properties:
                  ratios:
                    type: array
                    items:
                      type: object
                      properties:
                        ratioName:
                          type: string
                        value:
                          type: number
                        formula:
                          type: string
                        interpretation:
                          type: string
                        benchmark:
                          type: number
                        status:
                          type: string
                          enum:
                            - excellent
                            - good
                            - fair
                            - poor
                      required:
                        - ratioName
                        - value
                        - formula
                        - interpretation
                        - status
                  summary:
                    type: object
                    properties:
                      overallScore:
                        type: number
                      riskLevel:
                        type: string
                        enum:
                          - low
                          - medium
                          - high
                      keyInsights:
                        type: array
                        items:
                          type: string
                    required:
                      - overallScore
                      - riskLevel
                      - keyInsights
                required:
                  - ratios
                  - summary
  /api/computation/optimize-formulas:
    post:
      tags:
        - computation
      requestBody:
        description: Formulas to optimize
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                formulas:
                  type: array
                  items:
                    type: object
                    properties:
                      fieldId:
                        type: string
                      formula:
                        type: string
                      priority:
                        type: string
                        enum:
                          - high
                          - medium
                          - low
                        default: medium
                    required:
                      - fieldId
                      - formula
                optimizationGoals:
                  type: array
                  items:
                    type: string
                    enum:
                      - performance
                      - accuracy
                      - maintainability
              required:
                - formulas
                - optimizationGoals
      responses:
        "200":
          description: Formula optimization results
          content:
            application/json:
              schema:
                type: object
                properties:
                  optimizedFormulas:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldId:
                          type: string
                        originalFormula:
                          type: string
                        optimizedFormula:
                          type: string
                        improvementType:
                          type: string
                        performanceGain:
                          type: number
                        risks:
                          type: array
                          items:
                            type: string
                      required:
                        - fieldId
                        - originalFormula
                        - optimizedFormula
                        - improvementType
                        - performanceGain
                        - risks
                  recommendations:
                    type: array
                    items:
                      type: string
                required:
                  - optimizedFormulas
                  - recommendations
  
  /api/dashboard/summary:
    get:
      tags:
        - dashboard
      summary: Get dashboard summary statistics
      description: Retrieve comprehensive dashboard data including facilities,
        projects, reports, and alerts
      parameters:
        - schema:
            type: number
            nullable: true
          required: false
          name: facilityId
          in: query
        - schema:
            type: number
            nullable: true
          required: false
          name: projectId
          in: query
        - schema:
            type: number
            nullable: true
          required: false
          name: reportingPeriodId
          in: query
      responses:
        "200":
          description: Dashboard summary data
          content:
            application/json:
              schema:
                type: object
                properties:
                  facilities:
                    type: object
                    properties:
                      total:
                        type: number
                      byType:
                        type: object
                        additionalProperties:
                          type: number
                      byDistrict:
                        type: object
                        additionalProperties:
                          type: number
                    required:
                      - total
                      - byType
                      - byDistrict
                  projects:
                    type: object
                    properties:
                      total:
                        type: number
                      byType:
                        type: object
                        additionalProperties:
                          type: number
                      byStatus:
                        type: object
                        additionalProperties:
                          type: number
                    required:
                      - total
                      - byType
                      - byStatus
                  reports:
                    type: object
                    properties:
                      total:
                        type: number
                      byStatus:
                        type: object
                        additionalProperties:
                          type: number
                      pendingApproval:
                        type: number
                      recentlySubmitted:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                            reportCode:
                              type: string
                            title:
                              type: string
                            projectName:
                              type: string
                            facilityName:
                              type: string
                            fiscalYear:
                              type: string
                            status:
                              type: string
                              enum:
                                - draft
                                - submitted
                                - approved
                                - rejected
                            createdBy:
                              type: string
                            createdAt:
                              type: string
                            submittedAt:
                              type: string
                          required:
                            - id
                            - reportCode
                            - title
                            - projectName
                            - facilityName
                            - fiscalYear
                            - status
                            - createdBy
                            - createdAt
                    required:
                      - total
                      - byStatus
                      - pendingApproval
                      - recentlySubmitted
                  alerts:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        type:
                          type: string
                          enum:
                            - warning
                            - error
                            - info
                        title:
                          type: string
                        message:
                          type: string
                        severity:
                          type: string
                          enum:
                            - low
                            - medium
                            - high
                            - critical
                        entityType:
                          type: string
                        entityId:
                          type: number
                        createdAt:
                          type: string
                      required:
                        - id
                        - type
                        - title
                        - message
                        - severity
                        - createdAt
                required:
                  - facilities
                  - projects
                  - reports
                  - alerts
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  
  /api/districts:
    get:
      tags:
        - districts
      responses:
        "200":
          description: The list of districts
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    provinceId:
                      type: integer
                  required:
                    - id
                    - name
                    - provinceId
  /api/districts/{id}:
    get:
      tags:
        - districts
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The district
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  provinceId:
                    type: integer
                required:
                  - id
                  - name
                  - provinceId
        "404":
          description: District not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  
  /api/event-mappings:
    get:
      tags:
        - event-mappings
      parameters:
        - schema:
            type: integer
          required: false
          name: eventId
          in: query
        - schema:
            type: integer
          required: false
          name: activityId
          in: query
        - schema:
            type: integer
          required: false
          name: categoryId
          in: query
        - schema:
            type: string
            enum:
              - HIV
              - Malaria
              - TB
          required: false
          name: projectType
          in: query
        - schema:
            type: string
            enum:
              - hospital
              - health_center
          required: false
          name: facilityType
          in: query
        - schema:
            type: string
            enum:
              - DIRECT
              - COMPUTED
              - AGGREGATED
          required: false
          name: mappingType
          in: query
        - schema:
            type: boolean
          required: false
          name: isActive
          in: query
        - schema:
            type: integer
            minimum: 1
            default: 1
          required: false
          name: page
          in: query
        - schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: List of event mappings
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        eventId:
                          type: integer
                        activityId:
                          type: integer
                          nullable: true
                        categoryId:
                          type: integer
                          nullable: true
                        projectType:
                          type: string
                          enum:
                            - HIV
                            - Malaria
                            - TB
                        facilityType:
                          type: string
                          enum:
                            - hospital
                            - health_center
                        mappingType:
                          type: string
                          enum:
                            - DIRECT
                            - COMPUTED
                            - AGGREGATED
                        mappingFormula:
                          type: string
                          nullable: true
                        mappingRatio:
                          type: number
                        isActive:
                          type: boolean
                        effectiveFrom:
                          type: string
                          nullable: true
                        effectiveTo:
                          type: string
                          nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                        event:
                          type: object
                          properties:
                            id:
                              type: integer
                            noteNumber:
                              type: integer
                            code:
                              type: string
                            description:
                              type: string
                            statementCodes:
                              type: array
                              items:
                                type: string
                            eventType:
                              type: string
                              enum:
                                - REVENUE
                                - EXPENSE
                                - ASSET
                                - LIABILITY
                                - EQUITY
                            isCurrent:
                              type: boolean
                            displayOrder:
                              type: integer
                            createdAt:
                              type: string
                            updatedAt:
                              type: string
                          required:
                            - id
                            - noteNumber
                            - code
                            - description
                            - statementCodes
                            - eventType
                            - isCurrent
                            - displayOrder
                            - createdAt
                            - updatedAt
                        activity:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            code:
                              type: string
                          required:
                            - id
                            - name
                        category:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            code:
                              type: string
                          required:
                            - id
                            - name
                            - code
                      required:
                        - id
                        - eventId
                        - activityId
                        - categoryId
                        - projectType
                        - facilityType
                        - mappingType
                        - mappingFormula
                        - mappingRatio
                        - isActive
                        - effectiveFrom
                        - effectiveTo
                        - metadata
                        - createdAt
                        - updatedAt
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                required:
                  - data
                  - pagination
    post:
      tags:
        - event-mappings
      requestBody:
        description: Event mapping to create
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                eventId:
                  type: integer
                activityId:
                  type: integer
                categoryId:
                  type: integer
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityType:
                  type: string
                  enum:
                    - hospital
                    - health_center
                mappingType:
                  type: string
                  enum:
                    - DIRECT
                    - COMPUTED
                    - AGGREGATED
                  default: DIRECT
                mappingFormula:
                  type: string
                mappingRatio:
                  type: number
                  default: 1
                effectiveFrom:
                  type: string
                effectiveTo:
                  type: string
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - eventId
                - projectType
                - facilityType
      responses:
        "201":
          description: Created event mapping
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  eventId:
                    type: integer
                  activityId:
                    type: integer
                    nullable: true
                  categoryId:
                    type: integer
                    nullable: true
                  projectType:
                    type: string
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    enum:
                      - hospital
                      - health_center
                  mappingType:
                    type: string
                    enum:
                      - DIRECT
                      - COMPUTED
                      - AGGREGATED
                  mappingFormula:
                    type: string
                    nullable: true
                  mappingRatio:
                    type: number
                  isActive:
                    type: boolean
                  effectiveFrom:
                    type: string
                    nullable: true
                  effectiveTo:
                    type: string
                    nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - eventId
                  - activityId
                  - categoryId
                  - projectType
                  - facilityType
                  - mappingType
                  - mappingFormula
                  - mappingRatio
                  - isActive
                  - effectiveFrom
                  - effectiveTo
                  - metadata
                  - createdAt
                  - updatedAt
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/event-mappings/{id}:
    get:
      tags:
        - event-mappings
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: Event mapping details
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  eventId:
                    type: integer
                  activityId:
                    type: integer
                    nullable: true
                  categoryId:
                    type: integer
                    nullable: true
                  projectType:
                    type: string
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    enum:
                      - hospital
                      - health_center
                  mappingType:
                    type: string
                    enum:
                      - DIRECT
                      - COMPUTED
                      - AGGREGATED
                  mappingFormula:
                    type: string
                    nullable: true
                  mappingRatio:
                    type: number
                  isActive:
                    type: boolean
                  effectiveFrom:
                    type: string
                    nullable: true
                  effectiveTo:
                    type: string
                    nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                  event:
                    type: object
                    properties:
                      id:
                        type: integer
                      noteNumber:
                        type: integer
                      code:
                        type: string
                      description:
                        type: string
                      statementCodes:
                        type: array
                        items:
                          type: string
                      eventType:
                        type: string
                        enum:
                          - REVENUE
                          - EXPENSE
                          - ASSET
                          - LIABILITY
                          - EQUITY
                      isCurrent:
                        type: boolean
                      displayOrder:
                        type: integer
                      createdAt:
                        type: string
                      updatedAt:
                        type: string
                    required:
                      - id
                      - noteNumber
                      - code
                      - description
                      - statementCodes
                      - eventType
                      - isCurrent
                      - displayOrder
                      - createdAt
                      - updatedAt
                  activity:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      code:
                        type: string
                      activityType:
                        type: string
                    required:
                      - id
                      - name
                      - activityType
                  category:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      code:
                        type: string
                      description:
                        type: string
                    required:
                      - id
                      - name
                      - code
                required:
                  - id
                  - eventId
                  - activityId
                  - categoryId
                  - projectType
                  - facilityType
                  - mappingType
                  - mappingFormula
                  - mappingRatio
                  - isActive
                  - effectiveFrom
                  - effectiveTo
                  - metadata
                  - createdAt
                  - updatedAt
                  - event
        "404":
          description: Event mapping not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    put:
      tags:
        - event-mappings
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Event mapping updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                eventId:
                  type: integer
                activityId:
                  type: integer
                categoryId:
                  type: integer
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityType:
                  type: string
                  enum:
                    - hospital
                    - health_center
                mappingType:
                  type: string
                  enum:
                    - DIRECT
                    - COMPUTED
                    - AGGREGATED
                  default: DIRECT
                mappingFormula:
                  type: string
                mappingRatio:
                  type: number
                  default: 1
                effectiveFrom:
                  type: string
                effectiveTo:
                  type: string
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
      responses:
        "200":
          description: Updated event mapping
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  eventId:
                    type: integer
                  activityId:
                    type: integer
                    nullable: true
                  categoryId:
                    type: integer
                    nullable: true
                  projectType:
                    type: string
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    enum:
                      - hospital
                      - health_center
                  mappingType:
                    type: string
                    enum:
                      - DIRECT
                      - COMPUTED
                      - AGGREGATED
                  mappingFormula:
                    type: string
                    nullable: true
                  mappingRatio:
                    type: number
                  isActive:
                    type: boolean
                  effectiveFrom:
                    type: string
                    nullable: true
                  effectiveTo:
                    type: string
                    nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - eventId
                  - activityId
                  - categoryId
                  - projectType
                  - facilityType
                  - mappingType
                  - mappingFormula
                  - mappingRatio
                  - isActive
                  - effectiveFrom
                  - effectiveTo
                  - metadata
                  - createdAt
                  - updatedAt
        "404":
          description: Event mapping not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - event-mappings
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: Event mapping deleted successfully
        "404":
          description: Event mapping not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/event-mappings/bulk-update:
    post:
      tags:
        - event-mappings
      requestBody:
        description: Bulk mapping updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                mappings:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      eventId:
                        type: integer
                      activityId:
                        type: integer
                      categoryId:
                        type: integer
                      mappingType:
                        type: string
                        enum:
                          - DIRECT
                          - COMPUTED
                          - AGGREGATED
                      mappingFormula:
                        type: string
                      mappingRatio:
                        type: number
                        default: 1
                    required:
                      - eventId
                      - mappingType
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityType:
                  type: string
                  enum:
                    - hospital
                    - health_center
              required:
                - mappings
                - projectType
                - facilityType
      responses:
        "200":
          description: Bulk update results
          content:
            application/json:
              schema:
                type: object
                properties:
                  created:
                    type: number
                  updated:
                    type: number
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        index:
                          type: number
                        message:
                          type: string
                      required:
                        - index
                        - message
                required:
                  - created
                  - updated
                  - errors
  /api/event-mappings/validate:
    post:
      tags:
        - event-mappings
      requestBody:
        description: Mapping to validate
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                eventId:
                  type: integer
                mappingFormula:
                  type: string
                testData:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - eventId
                - mappingFormula
      responses:
        "200":
          description: Mapping validation results
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  result:
                    nullable: true
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        message:
                          type: string
                        code:
                          type: string
                      required:
                        - message
                        - code
                  warnings:
                    type: array
                    items:
                      type: object
                      properties:
                        message:
                          type: string
                        code:
                          type: string
                      required:
                        - message
                        - code
                required:
                  - isValid
                  - errors
                  - warnings
  /api/event-mappings/templates/{projectType}/{facilityType}:
    get:
      tags:
        - event-mappings
      parameters:
        - schema:
            type: string
            enum:
              - HIV
              - Malaria
              - TB
          required: true
          name: projectType
          in: path
        - schema:
            type: string
            enum:
              - hospital
              - health_center
          required: true
          name: facilityType
          in: path
      responses:
        "200":
          description: Event mapping template
          content:
            application/json:
              schema:
                type: object
                properties:
                  mappings:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        eventId:
                          type: integer
                        activityId:
                          type: integer
                          nullable: true
                        categoryId:
                          type: integer
                          nullable: true
                        projectType:
                          type: string
                          enum:
                            - HIV
                            - Malaria
                            - TB
                        facilityType:
                          type: string
                          enum:
                            - hospital
                            - health_center
                        mappingType:
                          type: string
                          enum:
                            - DIRECT
                            - COMPUTED
                            - AGGREGATED
                        mappingFormula:
                          type: string
                          nullable: true
                        mappingRatio:
                          type: number
                        isActive:
                          type: boolean
                        effectiveFrom:
                          type: string
                          nullable: true
                        effectiveTo:
                          type: string
                          nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - eventId
                        - activityId
                        - categoryId
                        - projectType
                        - facilityType
                        - mappingType
                        - mappingFormula
                        - mappingRatio
                        - isActive
                        - effectiveFrom
                        - effectiveTo
                        - metadata
                        - createdAt
                        - updatedAt
                  unmappedEvents:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        noteNumber:
                          type: integer
                        code:
                          type: string
                        description:
                          type: string
                        statementCodes:
                          type: array
                          items:
                            type: string
                        eventType:
                          type: string
                          enum:
                            - REVENUE
                            - EXPENSE
                            - ASSET
                            - LIABILITY
                            - EQUITY
                        isCurrent:
                          type: boolean
                        displayOrder:
                          type: integer
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - noteNumber
                        - code
                        - description
                        - statementCodes
                        - eventType
                        - isCurrent
                        - displayOrder
                        - createdAt
                        - updatedAt
                  recommendedMappings:
                    type: array
                    items:
                      type: object
                      properties:
                        eventId:
                          type: number
                        suggestedActivityId:
                          type: number
                        suggestedCategoryId:
                          type: number
                        confidence:
                          type: number
                        reason:
                          type: string
                      required:
                        - eventId
                        - confidence
                        - reason
                required:
                  - mappings
                  - unmappedEvents
                  - recommendedMappings
  
  /api/events:
    get:
      tags:
        - events
      responses:
        "200":
          description: The list of events
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    noteNumber:
                      type: integer
                    code:
                      type: string
                    description:
                      type: string
                    statementCodes:
                      type: array
                      items:
                        type: string
                    eventType:
                      type: string
                      enum:
                        - REVENUE
                        - EXPENSE
                        - ASSET
                        - LIABILITY
                        - EQUITY
                    isCurrent:
                      type: boolean
                    displayOrder:
                      type: integer
                    createdAt:
                      type: string
                    updatedAt:
                      type: string
                  required:
                    - id
                    - noteNumber
                    - code
                    - description
                    - statementCodes
                    - eventType
                    - isCurrent
                    - displayOrder
    post:
      tags:
        - events
      requestBody:
        description: The event to create
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                noteNumber:
                  type: integer
                code:
                  type: string
                  maxLength: 50
                description:
                  type: string
                statementCodes:
                  type: array
                  items:
                    type: string
                eventType:
                  type: string
                  enum:
                    - REVENUE
                    - EXPENSE
                    - ASSET
                    - LIABILITY
                    - EQUITY
                isCurrent:
                  type: boolean
                  default: true
                displayOrder:
                  type: integer
              required:
                - noteNumber
                - code
                - description
                - statementCodes
                - eventType
                - displayOrder
      responses:
        "201":
          description: The created event
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  noteNumber:
                    type: integer
                  code:
                    type: string
                  description:
                    type: string
                  statementCodes:
                    type: array
                    items:
                      type: string
                  eventType:
                    type: string
                    enum:
                      - REVENUE
                      - EXPENSE
                      - ASSET
                      - LIABILITY
                      - EQUITY
                  isCurrent:
                    type: boolean
                  displayOrder:
                    type: integer
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - noteNumber
                  - code
                  - description
                  - statementCodes
                  - eventType
                  - isCurrent
                  - displayOrder
        "400":
          description: Invalid event data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "409":
          description: Event with this code or note number already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/events/{id}:
    get:
      tags:
        - events
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The event
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  noteNumber:
                    type: integer
                  code:
                    type: string
                  description:
                    type: string
                  statementCodes:
                    type: array
                    items:
                      type: string
                  eventType:
                    type: string
                    enum:
                      - REVENUE
                      - EXPENSE
                      - ASSET
                      - LIABILITY
                      - EQUITY
                  isCurrent:
                    type: boolean
                  displayOrder:
                    type: integer
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - noteNumber
                  - code
                  - description
                  - statementCodes
                  - eventType
                  - isCurrent
                  - displayOrder
        "404":
          description: Event not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    put:
      tags:
        - events
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: The event updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                noteNumber:
                  type: integer
                code:
                  type: string
                  maxLength: 50
                description:
                  type: string
                statementCodes:
                  type: array
                  items:
                    type: string
                eventType:
                  type: string
                  enum:
                    - REVENUE
                    - EXPENSE
                    - ASSET
                    - LIABILITY
                    - EQUITY
                isCurrent:
                  type: boolean
                  default: true
                displayOrder:
                  type: integer
              required:
                - noteNumber
                - code
                - description
                - statementCodes
                - eventType
                - displayOrder
      responses:
        "200":
          description: The updated event
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  noteNumber:
                    type: integer
                  code:
                    type: string
                  description:
                    type: string
                  statementCodes:
                    type: array
                    items:
                      type: string
                  eventType:
                    type: string
                    enum:
                      - REVENUE
                      - EXPENSE
                      - ASSET
                      - LIABILITY
                      - EQUITY
                  isCurrent:
                    type: boolean
                  displayOrder:
                    type: integer
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - noteNumber
                  - code
                  - description
                  - statementCodes
                  - eventType
                  - isCurrent
                  - displayOrder
        "400":
          description: Invalid event data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "404":
          description: Event not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    patch:
      tags:
        - events
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: The event partial updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                noteNumber:
                  type: integer
                code:
                  type: string
                  maxLength: 50
                description:
                  type: string
                statementCodes:
                  type: array
                  items:
                    type: string
                eventType:
                  type: string
                  enum:
                    - REVENUE
                    - EXPENSE
                    - ASSET
                    - LIABILITY
                    - EQUITY
                isCurrent:
                  type: boolean
                  default: true
                displayOrder:
                  type: integer
      responses:
        "200":
          description: The updated event
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  noteNumber:
                    type: integer
                  code:
                    type: string
                  description:
                    type: string
                  statementCodes:
                    type: array
                    items:
                      type: string
                  eventType:
                    type: string
                    enum:
                      - REVENUE
                      - EXPENSE
                      - ASSET
                      - LIABILITY
                      - EQUITY
                  isCurrent:
                    type: boolean
                  displayOrder:
                    type: integer
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - noteNumber
                  - code
                  - description
                  - statementCodes
                  - eventType
                  - isCurrent
                  - displayOrder
        "400":
          description: Invalid event data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "404":
          description: Event not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - events
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: Event deleted successfully
        "404":
          description: Event not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  
  /api/execution/quarterly-summary:
    get:
      tags:
        - execution
      parameters:
        - schema:
            type: integer
            nullable: true
          required: false
          name: projectId
          in: query
        - schema:
            type: integer
            nullable: true
          required: false
          name: facilityId
          in: query
        - schema:
            type: integer
            nullable: true
          required: false
          name: year
          in: query
      responses:
        "200":
          description: Quarterly execution summary
          content:
            application/json:
              schema:
                type: object
                properties:
                  quarters:
                    type: object
                    additionalProperties:
                      type: object
                      properties:
                        totalReceipts:
                          type: number
                        totalExpenditures:
                          type: number
                        surplus:
                          type: number
                        netFinancialAssets:
                          type: number
                        closingBalance:
                          type: number
                        isBalanced:
                          type: boolean
                      required:
                        - totalReceipts
                        - totalExpenditures
                        - surplus
                        - netFinancialAssets
                        - closingBalance
                        - isBalanced
                  yearToDate:
                    type: object
                    properties:
                      totalReceipts:
                        type: number
                      totalExpenditures:
                        type: number
                      cumulativeSurplus:
                        type: number
                      finalClosingBalance:
                        type: number
                    required:
                      - totalReceipts
                      - totalExpenditures
                      - cumulativeSurplus
                      - finalClosingBalance
                required:
                  - quarters
                  - yearToDate
  /api/execution:
    get:
      tags:
        - execution
      parameters:
        - schema:
            type: integer
          required: false
          name: projectId
          in: query
        - schema:
            type: integer
          required: false
          name: facilityId
          in: query
        - schema:
            type: integer
          required: false
          name: reportingPeriodId
          in: query
        - schema:
            type: string
            enum:
              - Q1
              - Q2
              - Q3
              - Q4
          required: false
          name: quarter
          in: query
        - schema:
            type: integer
          required: false
          name: year
          in: query
        - schema:
            type: integer
            minimum: 1
            default: 1
          required: false
          name: page
          in: query
        - schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: List of execution data entries
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        schemaId:
                          type: integer
                        entityId:
                          type: integer
                          nullable: true
                        entityType:
                          type: string
                        projectId:
                          type: integer
                        facilityId:
                          type: integer
                        reportingPeriodId:
                          type: integer
                          nullable: true
                        formData:
                          type: object
                          additionalProperties:
                            nullable: true
                        computedValues:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationState:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        createdBy:
                          type: integer
                          nullable: true
                        createdAt:
                          type: string
                        updatedBy:
                          type: integer
                          nullable: true
                        updatedAt:
                          type: string
                      required:
                        - id
                        - schemaId
                        - entityId
                        - entityType
                        - projectId
                        - facilityId
                        - reportingPeriodId
                        - formData
                        - computedValues
                        - validationState
                        - metadata
                        - createdBy
                        - createdAt
                        - updatedBy
                        - updatedAt
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                required:
                  - data
                  - pagination
    post:
      tags:
        - execution
      requestBody:
        description: Execution data to create
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schemaId:
                  type: integer
                projectId:
                  type: integer
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                formData:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - schemaId
                - projectId
                - facilityId
                - formData
      responses:
        "201":
          description: Created execution data
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  schemaId:
                    type: integer
                  entityId:
                    type: integer
                    nullable: true
                  entityType:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                    nullable: true
                  formData:
                    type: object
                    additionalProperties:
                      nullable: true
                  computedValues:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationState:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                required:
                  - id
                  - schemaId
                  - entityId
                  - entityType
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - formData
                  - computedValues
                  - validationState
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/execution/{id}:
    get:
      tags:
        - execution
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: Execution data entry
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  schemaId:
                    type: integer
                  entityId:
                    type: integer
                    nullable: true
                  entityType:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                    nullable: true
                  formData:
                    type: object
                    additionalProperties:
                      nullable: true
                  computedValues:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationState:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                required:
                  - id
                  - schemaId
                  - entityId
                  - entityType
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - formData
                  - computedValues
                  - validationState
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
        "404":
          description: Execution data not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    put:
      tags:
        - execution
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Execution data updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schemaId:
                  type: integer
                projectId:
                  type: integer
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                formData:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
      responses:
        "200":
          description: Updated execution data
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  schemaId:
                    type: integer
                  entityId:
                    type: integer
                    nullable: true
                  entityType:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                    nullable: true
                  formData:
                    type: object
                    additionalProperties:
                      nullable: true
                  computedValues:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationState:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                required:
                  - id
                  - schemaId
                  - entityId
                  - entityType
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - formData
                  - computedValues
                  - validationState
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
        "404":
          description: Execution data not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - execution
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: Execution data deleted successfully
        "404":
          description: Execution data not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/execution/calculate-balances:
    post:
      tags:
        - execution
      requestBody:
        description: Data for balance calculation
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                executionId:
                  type: integer
                data:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - executionId
                - data
      responses:
        "200":
          description: Calculated balances
          content:
            application/json:
              schema:
                type: object
                properties:
                  receipts:
                    type: object
                    properties:
                      q1:
                        type: number
                      q2:
                        type: number
                      q3:
                        type: number
                      q4:
                        type: number
                      cumulativeBalance:
                        type: number
                    required:
                      - q1
                      - q2
                      - q3
                      - q4
                      - cumulativeBalance
                  expenditures:
                    type: object
                    properties:
                      q1:
                        type: number
                      q2:
                        type: number
                      q3:
                        type: number
                      q4:
                        type: number
                      cumulativeBalance:
                        type: number
                    required:
                      - q1
                      - q2
                      - q3
                      - q4
                      - cumulativeBalance
                  surplus:
                    type: object
                    properties:
                      q1:
                        type: number
                      q2:
                        type: number
                      q3:
                        type: number
                      q4:
                        type: number
                      cumulativeBalance:
                        type: number
                    required:
                      - q1
                      - q2
                      - q3
                      - q4
                      - cumulativeBalance
                  financialAssets:
                    type: object
                    properties:
                      q1:
                        type: number
                      q2:
                        type: number
                      q3:
                        type: number
                      q4:
                        type: number
                      cumulativeBalance:
                        type: number
                    required:
                      - q1
                      - q2
                      - q3
                      - q4
                      - cumulativeBalance
                  financialLiabilities:
                    type: object
                    properties:
                      q1:
                        type: number
                      q2:
                        type: number
                      q3:
                        type: number
                      q4:
                        type: number
                      cumulativeBalance:
                        type: number
                    required:
                      - q1
                      - q2
                      - q3
                      - q4
                      - cumulativeBalance
                  netFinancialAssets:
                    type: object
                    properties:
                      q1:
                        type: number
                      q2:
                        type: number
                      q3:
                        type: number
                      q4:
                        type: number
                      cumulativeBalance:
                        type: number
                    required:
                      - q1
                      - q2
                      - q3
                      - q4
                      - cumulativeBalance
                  closingBalance:
                    type: object
                    properties:
                      q1:
                        type: number
                      q2:
                        type: number
                      q3:
                        type: number
                      q4:
                        type: number
                      cumulativeBalance:
                        type: number
                    required:
                      - q1
                      - q2
                      - q3
                      - q4
                      - cumulativeBalance
                  isBalanced:
                    type: boolean
                  validationErrors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                        code:
                          type: string
                      required:
                        - field
                        - message
                        - code
                required:
                  - receipts
                  - expenditures
                  - surplus
                  - financialAssets
                  - financialLiabilities
                  - netFinancialAssets
                  - closingBalance
                  - isBalanced
                  - validationErrors
  /api/execution/validate-accounting-equation:
    post:
      tags:
        - execution
      requestBody:
        description: Data to validate
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
                  additionalProperties:
                    nullable: true
                tolerance:
                  type: number
                  default: 0.01
              required:
                - data
      responses:
        "200":
          description: Accounting equation validation results
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  netFinancialAssets:
                    type: number
                  closingBalance:
                    type: number
                  difference:
                    type: number
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                        code:
                          type: string
                      required:
                        - field
                        - message
                        - code
                required:
                  - isValid
                  - netFinancialAssets
                  - closingBalance
                  - difference
                  - errors
  
  /api/facilities:
    get:
      tags:
        - facilities
      responses:
        "200":
          description: The list of facilities
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    facilityType:
                      type: string
                      enum:
                        - hospital
                        - health_center
                    districtId:
                      type: integer
                  required:
                    - id
                    - name
                    - facilityType
                    - districtId
  /api/facilities/by-district:
    get:
      tags:
        - facilities
      parameters:
        - schema:
            type: integer
            minimum: 0
            exclusiveMinimum: true
          required: true
          name: districtId
          in: query
      responses:
        "200":
          description: A list of facilities in the district
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    facilityType:
                      type: string
                      enum:
                        - hospital
                        - health_center
                  required:
                    - id
                    - name
                    - facilityType
        "400":
          description: Invalid district ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Bad Request
        "404":
          description: Facilities not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/facilities/by-name:
    get:
      tags:
        - facilities
      parameters:
        - schema:
            type: string
            minLength: 1
          required: true
          name: facilityName
          in: query
      responses:
        "200":
          description: The facility
          content:
            application/json:
              schema:
                type: object
                properties:
                  facilityId:
                    type: number
                    nullable: true
                  facilityName:
                    type: string
                required:
                  - facilityId
                  - facilityName
        "400":
          description: Invalid facility data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Bad Request
        "404":
          description: Facility not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/facilities/{id}:
    get:
      tags:
        - facilities
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The facility
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  facilityType:
                    type: string
                    enum:
                      - hospital
                      - health_center
                  districtId:
                    type: integer
                required:
                  - id
                  - name
                  - facilityType
                  - districtId
        "404":
          description: Facility not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  
  /api/migration/normalize-legacy-reports:
    post:
      tags:
        - migration
      summary: Normalize legacy financial reports to new schema format
      description: Converts legacy financial report data to the new schema-driven
        format, applying field mappings and validations
      requestBody:
        description: Legacy report data and normalization configuration
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                legacyData:
                  type: object
                  additionalProperties:
                    nullable: true
                  description: Legacy financial report data in original format
                targetSchemaId:
                  type: integer
                  description: ID of the target form schema to normalize to
                projectId:
                  type: integer
                  description: Project ID for the migrated data
                facilityId:
                  type: integer
                  description: Facility ID for the migrated data
                reportingPeriodId:
                  type: integer
                  description: Reporting period ID if applicable
                mappingRules:
                  type: object
                  additionalProperties:
                    nullable: true
                  description: Custom field mapping rules
                validationMode:
                  type: string
                  enum:
                    - strict
                    - lenient
                    - skip
                  default: strict
                  description: Validation strictness level
                preserveOriginal:
                  type: boolean
                  default: true
                  description: Whether to preserve original data for rollback
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                  description: Additional migration metadata
              required:
                - legacyData
                - targetSchemaId
                - projectId
                - facilityId
      responses:
        "200":
          description: Successfully normalized legacy data
          content:
            application/json:
              schema:
                type: object
                properties:
                  migrationId:
                    type: string
                    description: Unique migration identifier
                  status:
                    type: string
                    enum:
                      - pending
                      - in_progress
                      - completed
                      - failed
                      - cancelled
                  normalizedData:
                    type: object
                    additionalProperties:
                      nullable: true
                    description: Normalized data structure
                  validationResults:
                    type: object
                    properties:
                      isValid:
                        type: boolean
                      errors:
                        type: array
                        items:
                          type: object
                          properties:
                            field:
                              type: string
                            message:
                              type: string
                            severity:
                              type: string
                              enum:
                                - error
                                - warning
                                - info
                          required:
                            - field
                            - message
                            - severity
                      warnings:
                        type: array
                        items:
                          type: string
                      summary:
                        type: object
                        properties:
                          totalFields:
                            type: number
                          validFields:
                            type: number
                          errorFields:
                            type: number
                          warningFields:
                            type: number
                        required:
                          - totalFields
                          - validFields
                          - errorFields
                          - warningFields
                    required:
                      - isValid
                      - errors
                      - warnings
                      - summary
                  mappingReport:
                    type: object
                    properties:
                      appliedMappings:
                        type: object
                        additionalProperties:
                          type: string
                      unmappedFields:
                        type: array
                        items:
                          type: string
                      computedFields:
                        type: array
                        items:
                          type: string
                      transformations:
                        type: array
                        items:
                          type: object
                          properties:
                            field:
                              type: string
                            originalValue:
                              nullable: true
                            transformedValue:
                              nullable: true
                            rule:
                              type: string
                          required:
                            - field
                            - rule
                    required:
                      - appliedMappings
                      - unmappedFields
                      - computedFields
                      - transformations
                  createdAt:
                    type: string
                    format: date-time
                  estimatedCompletionTime:
                    type: string
                required:
                  - migrationId
                  - status
                  - validationResults
                  - createdAt
        "400":
          description: Invalid request data or validation errors
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  validationErrors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
        "422":
          description: Migration failed due to data inconsistencies
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  migrationId:
                    type: string
                  errors:
                    type: array
                    items:
                      type: string
                required:
                  - message
                  - errors
  /api/migration/validate-migration:
    post:
      tags:
        - migration
      summary: Validate a migration before or after execution
      description: Performs comprehensive validation of migration data including
        structure, references, and business rules
      requestBody:
        description: Migration validation configuration
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                migrationId:
                  type: string
                  description: Migration ID to validate
                validationType:
                  type: string
                  enum:
                    - structure
                    - data
                    - references
                    - business_rules
                  default: structure
                includeWarnings:
                  type: boolean
                  default: true
                customValidators:
                  type: array
                  items:
                    type: string
                  description: Additional validation rule names to apply
              required:
                - migrationId
      responses:
        "200":
          description: Migration validation results
          content:
            application/json:
              schema:
                type: object
                properties:
                  migrationId:
                    type: string
                  isValid:
                    type: boolean
                  validationType:
                    type: string
                  results:
                    type: object
                    properties:
                      structureValidation:
                        type: object
                        properties:
                          isValid:
                            type: boolean
                          missingFields:
                            type: array
                            items:
                              type: string
                          extraFields:
                            type: array
                            items:
                              type: string
                          typeErrors:
                            type: array
                            items:
                              type: object
                              properties:
                                field:
                                  type: string
                                expectedType:
                                  type: string
                                actualType:
                                  type: string
                              required:
                                - field
                                - expectedType
                                - actualType
                        required:
                          - isValid
                          - missingFields
                          - extraFields
                          - typeErrors
                      dataValidation:
                        type: object
                        properties:
                          isValid:
                            type: boolean
                          errors:
                            type: array
                            items:
                              type: object
                              properties:
                                field:
                                  type: string
                                value:
                                  nullable: true
                                constraint:
                                  type: string
                                message:
                                  type: string
                              required:
                                - field
                                - constraint
                                - message
                          warnings:
                            type: array
                            items:
                              type: string
                        required:
                          - isValid
                          - errors
                          - warnings
                      referenceValidation:
                        type: object
                        properties:
                          isValid:
                            type: boolean
                          brokenReferences:
                            type: array
                            items:
                              type: object
                              properties:
                                field:
                                  type: string
                                value:
                                  nullable: true
                                targetTable:
                                  type: string
                                message:
                                  type: string
                              required:
                                - field
                                - targetTable
                                - message
                        required:
                          - isValid
                          - brokenReferences
                      businessRuleValidation:
                        type: object
                        properties:
                          isValid:
                            type: boolean
                          violations:
                            type: array
                            items:
                              type: object
                              properties:
                                rule:
                                  type: string
                                description:
                                  type: string
                                affectedFields:
                                  type: array
                                  items:
                                    type: string
                                severity:
                                  type: string
                                  enum:
                                    - error
                                    - warning
                              required:
                                - rule
                                - description
                                - affectedFields
                                - severity
                        required:
                          - isValid
                          - violations
                  summary:
                    type: object
                    properties:
                      totalChecks:
                        type: number
                      passedChecks:
                        type: number
                      failedChecks:
                        type: number
                      warningCount:
                        type: number
                    required:
                      - totalChecks
                      - passedChecks
                      - failedChecks
                      - warningCount
                  recommendations:
                    type: array
                    items:
                      type: string
                  validatedAt:
                    type: string
                    format: date-time
                required:
                  - migrationId
                  - isValid
                  - validationType
                  - results
                  - summary
                  - validatedAt
        "400":
          description: Invalid validation request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: string
                required:
                  - message
        "404":
          description: Migration not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/migration/status/{id}:
    get:
      tags:
        - migration
      summary: Get detailed migration status and progress
      description: Retrieves current status, progress, and statistics for a specific
        migration
      parameters:
        - schema:
            type: string
            description: Migration ID
          required: true
          description: Migration ID
          name: id
          in: path
      responses:
        "200":
          description: Migration status and progress information
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  type:
                    type: string
                    enum:
                      - normalize_legacy_reports
                      - schema_migration
                      - data_transformation
                      - bulk_import
                  status:
                    type: string
                    enum:
                      - pending
                      - in_progress
                      - completed
                      - failed
                      - cancelled
                  progress:
                    type: number
                    minimum: 0
                    maximum: 100
                    description: Progress percentage
                  currentStep:
                    type: string
                  totalSteps:
                    type: number
                  startedAt:
                    type: string
                    format: date-time
                  completedAt:
                    type: string
                    format: date-time
                  estimatedTimeRemaining:
                    type: number
                    description: Seconds remaining
                  statistics:
                    type: object
                    properties:
                      recordsProcessed:
                        type: number
                      recordsTotal:
                        type: number
                      recordsSuccessful:
                        type: number
                      recordsFailed:
                        type: number
                      recordsSkipped:
                        type: number
                    required:
                      - recordsProcessed
                      - recordsTotal
                      - recordsSuccessful
                      - recordsFailed
                      - recordsSkipped
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        timestamp:
                          type: string
                          format: date-time
                        error:
                          type: string
                        context:
                          type: object
                          additionalProperties:
                            nullable: true
                      required:
                        - timestamp
                        - error
                  warnings:
                    type: array
                    items:
                      type: string
                  metadata:
                    type: object
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: number
                  updatedAt:
                    type: string
                    format: date-time
                required:
                  - id
                  - type
                  - status
                  - progress
                  - updatedAt
        "404":
          description: Migration not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/migration/schema-migration:
    post:
      tags:
        - migration
      summary: Migrate data between different schema versions
      description: Migrates form data from one schema version to another with field
        mappings and transformations
      requestBody:
        description: Schema migration configuration
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                sourceSchemaId:
                  type: integer
                  description: Source form schema ID
                targetSchemaId:
                  type: integer
                  description: Target form schema ID
                entityIds:
                  type: array
                  items:
                    type: number
                  description: Specific entity IDs to migrate (empty = all)
                fieldMappings:
                  type: object
                  additionalProperties:
                    type: string
                  description: Manual field mappings
                transformationRules:
                  type: array
                  items:
                    type: object
                    properties:
                      sourceField:
                        type: string
                      targetField:
                        type: string
                      transformFunction:
                        type: string
                      parameters:
                        type: object
                        additionalProperties:
                          nullable: true
                    required:
                      - sourceField
                      - targetField
                      - transformFunction
                options:
                  type: object
                  properties:
                    preserveOriginal:
                      type: boolean
                      default: true
                    validateAfterMigration:
                      type: boolean
                      default: true
                    allowPartialMigration:
                      type: boolean
                      default: false
                    batchSize:
                      type: number
                      default: 100
              required:
                - sourceSchemaId
                - targetSchemaId
      responses:
        "202":
          description: Schema migration initiated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  migrationId:
                    type: string
                  message:
                    type: string
                  estimatedTime:
                    type: number
                required:
                  - migrationId
                  - message
        "400":
          description: Invalid schema migration request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: string
                required:
                  - message
        "409":
          description: Conflicting migration in progress
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  conflictingMigrations:
                    type: array
                    items:
                      type: string
                required:
                  - message
  /api/migration/bulk-import:
    post:
      tags:
        - migration
      summary: Import bulk data from various formats
      description: Imports data in bulk from CSV, Excel, JSON, or XML formats into the
        schema-driven system
      requestBody:
        description: Bulk import data and configuration
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                importType:
                  type: string
                  enum:
                    - csv
                    - excel
                    - json
                    - xml
                schemaId:
                  type: integer
                  description: Target form schema ID
                data:
                  type: string
                  description: Base64 encoded file data or direct JSON string
                options:
                  type: object
                  properties:
                    hasHeaders:
                      type: boolean
                      default: true
                    delimiter:
                      type: string
                      default: ","
                    encoding:
                      type: string
                      default: utf-8
                    skipValidation:
                      type: boolean
                      default: false
                    allowPartialImport:
                      type: boolean
                      default: false
                    updateExisting:
                      type: boolean
                      default: false
                fieldMappings:
                  type: object
                  additionalProperties:
                    type: string
                defaultValues:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - importType
                - schemaId
                - data
      responses:
        "202":
          description: Bulk import initiated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  migrationId:
                    type: string
                  message:
                    type: string
                  previewData:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        nullable: true
                  statistics:
                    type: object
                    properties:
                      totalRecords:
                        type: number
                      validRecords:
                        type: number
                      invalidRecords:
                        type: number
                    required:
                      - totalRecords
                      - validRecords
                      - invalidRecords
                required:
                  - migrationId
                  - message
        "400":
          description: Invalid import data or format
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  formatErrors:
                    type: array
                    items:
                      type: string
                required:
                  - message
        "413":
          description: Import data exceeds size limits
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  maxSize:
                    type: number
                  actualSize:
                    type: number
                required:
                  - message
                  - maxSize
                  - actualSize
  /api/migration/history:
    get:
      tags:
        - migration
      summary: Get migration history with pagination
      description: Retrieves paginated list of all migrations with their status and
        statistics
      parameters:
        - schema:
            type: integer
            nullable: true
            default: 1
          required: false
          name: page
          in: query
        - schema:
            type: integer
            nullable: true
            default: 20
          required: false
          name: limit
          in: query
        - schema:
            type: string
            enum:
              - pending
              - in_progress
              - completed
              - failed
              - cancelled
          required: false
          name: status
          in: query
        - schema:
            type: string
            enum:
              - normalize_legacy_reports
              - schema_migration
              - data_transformation
              - bulk_import
          required: false
          name: type
          in: query
        - schema:
            type: string
          required: false
          name: createdBy
          in: query
        - schema:
            type: string
          required: false
          name: dateFrom
          in: query
        - schema:
            type: string
          required: false
          name: dateTo
          in: query
      responses:
        "200":
          description: Migration history with pagination
          content:
            application/json:
              schema:
                type: object
                properties:
                  migrations:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        type:
                          type: string
                          enum:
                            - normalize_legacy_reports
                            - schema_migration
                            - data_transformation
                            - bulk_import
                        status:
                          type: string
                          enum:
                            - pending
                            - in_progress
                            - completed
                            - failed
                            - cancelled
                        description:
                          type: string
                        startedAt:
                          type: string
                          format: date-time
                        completedAt:
                          type: string
                          format: date-time
                        createdBy:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            email:
                              type: string
                          required:
                            - id
                            - name
                            - email
                        statistics:
                          type: object
                          properties:
                            recordsProcessed:
                              type: number
                            recordsSuccessful:
                              type: number
                            recordsFailed:
                              type: number
                          required:
                            - recordsProcessed
                            - recordsSuccessful
                            - recordsFailed
                        canRollback:
                          type: boolean
                      required:
                        - id
                        - type
                        - status
                        - description
                        - startedAt
                        - canRollback
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                required:
                  - migrations
                  - pagination
  /api/migration/{id}/cancel:
    post:
      tags:
        - migration
      summary: Cancel an in-progress migration
      description: Cancels a currently running migration and performs cleanup
      parameters:
        - schema:
            type: string
            description: Migration ID
          required: true
          description: Migration ID
          name: id
          in: path
      requestBody:
        description: Cancellation reason
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
      responses:
        "200":
          description: Migration cancelled successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  migrationId:
                    type: string
                  cancelledAt:
                    type: string
                    format: date-time
                required:
                  - message
                  - migrationId
                  - cancelledAt
        "404":
          description: Migration not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "409":
          description: Migration cannot be cancelled in current state
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  currentStatus:
                    type: string
                required:
                  - message
                  - currentStatus
  /api/migration/{id}/rollback:
    post:
      tags:
        - migration
      summary: Rollback a completed migration
      description: Reverts changes made by a completed migration, restoring original data
      parameters:
        - schema:
            type: string
            description: Migration ID
          required: true
          description: Migration ID
          name: id
          in: path
      requestBody:
        description: Rollback configuration
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                migrationId:
                  type: string
                rollbackReason:
                  type: string
                preserveChanges:
                  type: boolean
                  default: false
                  description: Whether to preserve any manual changes made after migration
              required:
                - migrationId
      responses:
        "202":
          description: Rollback initiated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  rollbackId:
                    type: string
                  message:
                    type: string
                  originalMigrationId:
                    type: string
                required:
                  - rollbackId
                  - message
                  - originalMigrationId
        "400":
          description: Migration cannot be rolled back
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  reason:
                    type: string
                required:
                  - message
                  - reason
        "404":
          description: Migration not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/migration/transform-data:
    post:
      tags:
        - migration
      summary: Apply data transformations
      description: Applies custom transformation rules to data without full migration
      requestBody:
        description: Data transformation configuration
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                sourceData:
                  type: array
                  items:
                    type: object
                    additionalProperties:
                      nullable: true
                transformationRules:
                  type: array
                  items:
                    type: object
                    properties:
                      type:
                        type: string
                        enum:
                          - field_rename
                          - value_transform
                          - field_merge
                          - field_split
                          - conditional_transform
                      config:
                        type: object
                        additionalProperties:
                          nullable: true
                    required:
                      - type
                      - config
                targetSchema:
                  type: object
                  properties:
                    fields:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                          type:
                            type: string
                          required:
                            type: boolean
                          validation:
                            type: object
                            additionalProperties:
                              nullable: true
                        required:
                          - name
                          - type
                  required:
                    - fields
                options:
                  type: object
                  properties:
                    validateOutput:
                      type: boolean
                      default: true
                    preserveMetadata:
                      type: boolean
                      default: true
                    generateReport:
                      type: boolean
                      default: true
              required:
                - sourceData
                - transformationRules
      responses:
        "200":
          description: Data transformed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  transformedData:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        nullable: true
                  transformationReport:
                    type: object
                    properties:
                      totalRecords:
                        type: number
                      successfulTransformations:
                        type: number
                      failedTransformations:
                        type: number
                      warnings:
                        type: array
                        items:
                          type: string
                      appliedRules:
                        type: array
                        items:
                          type: string
                    required:
                      - totalRecords
                      - successfulTransformations
                      - failedTransformations
                      - warnings
                      - appliedRules
                  validationResults:
                    type: object
                    properties:
                      migrationId:
                        type: string
                      isValid:
                        type: boolean
                      validationType:
                        type: string
                      results:
                        type: object
                        properties:
                          structureValidation:
                            type: object
                            properties:
                              isValid:
                                type: boolean
                              missingFields:
                                type: array
                                items:
                                  type: string
                              extraFields:
                                type: array
                                items:
                                  type: string
                              typeErrors:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    field:
                                      type: string
                                    expectedType:
                                      type: string
                                    actualType:
                                      type: string
                                  required:
                                    - field
                                    - expectedType
                                    - actualType
                            required:
                              - isValid
                              - missingFields
                              - extraFields
                              - typeErrors
                          dataValidation:
                            type: object
                            properties:
                              isValid:
                                type: boolean
                              errors:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    field:
                                      type: string
                                    value:
                                      nullable: true
                                    constraint:
                                      type: string
                                    message:
                                      type: string
                                  required:
                                    - field
                                    - constraint
                                    - message
                              warnings:
                                type: array
                                items:
                                  type: string
                            required:
                              - isValid
                              - errors
                              - warnings
                          referenceValidation:
                            type: object
                            properties:
                              isValid:
                                type: boolean
                              brokenReferences:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    field:
                                      type: string
                                    value:
                                      nullable: true
                                    targetTable:
                                      type: string
                                    message:
                                      type: string
                                  required:
                                    - field
                                    - targetTable
                                    - message
                            required:
                              - isValid
                              - brokenReferences
                          businessRuleValidation:
                            type: object
                            properties:
                              isValid:
                                type: boolean
                              violations:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    rule:
                                      type: string
                                    description:
                                      type: string
                                    affectedFields:
                                      type: array
                                      items:
                                        type: string
                                    severity:
                                      type: string
                                      enum:
                                        - error
                                        - warning
                                  required:
                                    - rule
                                    - description
                                    - affectedFields
                                    - severity
                            required:
                              - isValid
                              - violations
                      summary:
                        type: object
                        properties:
                          totalChecks:
                            type: number
                          passedChecks:
                            type: number
                          failedChecks:
                            type: number
                          warningCount:
                            type: number
                        required:
                          - totalChecks
                          - passedChecks
                          - failedChecks
                          - warningCount
                      recommendations:
                        type: array
                        items:
                          type: string
                      validatedAt:
                        type: string
                        format: date-time
                    required:
                      - migrationId
                      - isValid
                      - validationType
                      - results
                      - summary
                      - validatedAt
                required:
                  - transformedData
                  - transformationReport
        "400":
          description: Transformation failed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  transformationErrors:
                    type: array
                    items:
                      type: object
                      properties:
                        rule:
                          type: string
                        error:
                          type: string
                        affectedRecords:
                          type: number
                      required:
                        - rule
                        - error
                        - affectedRecords
                required:
                  - message
  /api/migration/dry-run:
    post:
      tags:
        - migration
      summary: Perform a dry run of migration without making changes
      description: Simulates migration process to identify potential issues without
        modifying data
      requestBody:
        description: Migration configuration for dry run
        required: true
        content:
          application/json:
            schema:
              anyOf:
                - type: object
                  properties:
                    legacyData:
                      type: object
                      additionalProperties:
                        nullable: true
                      description: Legacy financial report data in original format
                    targetSchemaId:
                      type: integer
                      description: ID of the target form schema to normalize to
                    projectId:
                      type: integer
                      description: Project ID for the migrated data
                    facilityId:
                      type: integer
                      description: Facility ID for the migrated data
                    reportingPeriodId:
                      type: integer
                      description: Reporting period ID if applicable
                    mappingRules:
                      type: object
                      additionalProperties:
                        nullable: true
                      description: Custom field mapping rules
                    validationMode:
                      type: string
                      enum:
                        - strict
                        - lenient
                        - skip
                      default: strict
                      description: Validation strictness level
                    preserveOriginal:
                      type: boolean
                      default: true
                      description: Whether to preserve original data for rollback
                    metadata:
                      type: object
                      additionalProperties:
                        nullable: true
                      description: Additional migration metadata
                  required:
                    - legacyData
                    - targetSchemaId
                    - projectId
                    - facilityId
                - type: object
                  properties:
                    sourceSchemaId:
                      type: integer
                      description: Source form schema ID
                    targetSchemaId:
                      type: integer
                      description: Target form schema ID
                    entityIds:
                      type: array
                      items:
                        type: number
                      description: Specific entity IDs to migrate (empty = all)
                    fieldMappings:
                      type: object
                      additionalProperties:
                        type: string
                      description: Manual field mappings
                    transformationRules:
                      type: array
                      items:
                        type: object
                        properties:
                          sourceField:
                            type: string
                          targetField:
                            type: string
                          transformFunction:
                            type: string
                          parameters:
                            type: object
                            additionalProperties:
                              nullable: true
                        required:
                          - sourceField
                          - targetField
                          - transformFunction
                    options:
                      type: object
                      properties:
                        preserveOriginal:
                          type: boolean
                          default: true
                        validateAfterMigration:
                          type: boolean
                          default: true
                        allowPartialMigration:
                          type: boolean
                          default: false
                        batchSize:
                          type: number
                          default: 100
                  required:
                    - sourceSchemaId
                    - targetSchemaId
                - type: object
                  properties:
                    importType:
                      type: string
                      enum:
                        - csv
                        - excel
                        - json
                        - xml
                    schemaId:
                      type: integer
                      description: Target form schema ID
                    data:
                      type: string
                      description: Base64 encoded file data or direct JSON string
                    options:
                      type: object
                      properties:
                        hasHeaders:
                          type: boolean
                          default: true
                        delimiter:
                          type: string
                          default: ","
                        encoding:
                          type: string
                          default: utf-8
                        skipValidation:
                          type: boolean
                          default: false
                        allowPartialImport:
                          type: boolean
                          default: false
                        updateExisting:
                          type: boolean
                          default: false
                    fieldMappings:
                      type: object
                      additionalProperties:
                        type: string
                    defaultValues:
                      type: object
                      additionalProperties:
                        nullable: true
                    metadata:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - importType
                    - schemaId
                    - data
      responses:
        "200":
          description: Dry run completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  dryRunId:
                    type: string
                  simulationResults:
                    type: object
                    properties:
                      wouldSucceed:
                        type: boolean
                      affectedRecords:
                        type: number
                      estimatedTime:
                        type: number
                      potentialIssues:
                        type: array
                        items:
                          type: object
                          properties:
                            severity:
                              type: string
                              enum:
                                - error
                                - warning
                                - info
                            message:
                              type: string
                            affectedFields:
                              type: array
                              items:
                                type: string
                          required:
                            - severity
                            - message
                      resourceRequirements:
                        type: object
                        properties:
                          estimatedMemory:
                            type: string
                          estimatedDiskSpace:
                            type: string
                          estimatedDuration:
                            type: string
                        required:
                          - estimatedMemory
                          - estimatedDiskSpace
                          - estimatedDuration
                    required:
                      - wouldSucceed
                      - affectedRecords
                      - estimatedTime
                      - potentialIssues
                  validationResults:
                    type: object
                    properties:
                      migrationId:
                        type: string
                      isValid:
                        type: boolean
                      validationType:
                        type: string
                      results:
                        type: object
                        properties:
                          structureValidation:
                            type: object
                            properties:
                              isValid:
                                type: boolean
                              missingFields:
                                type: array
                                items:
                                  type: string
                              extraFields:
                                type: array
                                items:
                                  type: string
                              typeErrors:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    field:
                                      type: string
                                    expectedType:
                                      type: string
                                    actualType:
                                      type: string
                                  required:
                                    - field
                                    - expectedType
                                    - actualType
                            required:
                              - isValid
                              - missingFields
                              - extraFields
                              - typeErrors
                          dataValidation:
                            type: object
                            properties:
                              isValid:
                                type: boolean
                              errors:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    field:
                                      type: string
                                    value:
                                      nullable: true
                                    constraint:
                                      type: string
                                    message:
                                      type: string
                                  required:
                                    - field
                                    - constraint
                                    - message
                              warnings:
                                type: array
                                items:
                                  type: string
                            required:
                              - isValid
                              - errors
                              - warnings
                          referenceValidation:
                            type: object
                            properties:
                              isValid:
                                type: boolean
                              brokenReferences:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    field:
                                      type: string
                                    value:
                                      nullable: true
                                    targetTable:
                                      type: string
                                    message:
                                      type: string
                                  required:
                                    - field
                                    - targetTable
                                    - message
                            required:
                              - isValid
                              - brokenReferences
                          businessRuleValidation:
                            type: object
                            properties:
                              isValid:
                                type: boolean
                              violations:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    rule:
                                      type: string
                                    description:
                                      type: string
                                    affectedFields:
                                      type: array
                                      items:
                                        type: string
                                    severity:
                                      type: string
                                      enum:
                                        - error
                                        - warning
                                  required:
                                    - rule
                                    - description
                                    - affectedFields
                                    - severity
                            required:
                              - isValid
                              - violations
                      summary:
                        type: object
                        properties:
                          totalChecks:
                            type: number
                          passedChecks:
                            type: number
                          failedChecks:
                            type: number
                          warningCount:
                            type: number
                        required:
                          - totalChecks
                          - passedChecks
                          - failedChecks
                          - warningCount
                      recommendations:
                        type: array
                        items:
                          type: string
                      validatedAt:
                        type: string
                        format: date-time
                    required:
                      - migrationId
                      - isValid
                      - validationType
                      - results
                      - summary
                      - validatedAt
                  recommendations:
                    type: array
                    items:
                      type: string
                required:
                  - dryRunId
                  - simulationResults
        "400":
          description: Invalid dry run configuration
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  configurationErrors:
                    type: array
                    items:
                      type: string
                required:
                  - message
  
  /api/planning:
    get:
      tags:
        - planning
      parameters:
        - schema:
            type: integer
          required: false
          name: projectId
          in: query
        - schema:
            type: integer
          required: false
          name: facilityId
          in: query
        - schema:
            type: integer
          required: false
          name: reportingPeriodId
          in: query
        - schema:
            type: integer
          required: false
          name: categoryId
          in: query
        - schema:
            type: integer
          required: false
          name: year
          in: query
        - schema:
            type: integer
            minimum: 1
            default: 1
          required: false
          name: page
          in: query
        - schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: List of planning data entries
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        schemaId:
                          type: integer
                        entityId:
                          type: integer
                          nullable: true
                        entityType:
                          type: string
                        projectId:
                          type: integer
                        facilityId:
                          type: integer
                        reportingPeriodId:
                          type: integer
                          nullable: true
                        formData:
                          type: object
                          additionalProperties:
                            nullable: true
                        computedValues:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationState:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        createdBy:
                          type: integer
                          nullable: true
                        createdAt:
                          type: string
                        updatedBy:
                          type: integer
                          nullable: true
                        updatedAt:
                          type: string
                      required:
                        - id
                        - schemaId
                        - entityId
                        - entityType
                        - projectId
                        - facilityId
                        - reportingPeriodId
                        - formData
                        - computedValues
                        - validationState
                        - metadata
                        - createdBy
                        - createdAt
                        - updatedBy
                        - updatedAt
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                required:
                  - data
                  - pagination
    post:
      tags:
        - planning
      requestBody:
        description: Planning data to create
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schemaId:
                  type: integer
                projectId:
                  type: integer
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                formData:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - schemaId
                - projectId
                - facilityId
                - formData
      responses:
        "201":
          description: Created planning data
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  schemaId:
                    type: integer
                  entityId:
                    type: integer
                    nullable: true
                  entityType:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                    nullable: true
                  formData:
                    type: object
                    additionalProperties:
                      nullable: true
                  computedValues:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationState:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                required:
                  - id
                  - schemaId
                  - entityId
                  - entityType
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - formData
                  - computedValues
                  - validationState
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/planning/{id}:
    get:
      tags:
        - planning
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: Planning data entry
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  schemaId:
                    type: integer
                  entityId:
                    type: integer
                    nullable: true
                  entityType:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                    nullable: true
                  formData:
                    type: object
                    additionalProperties:
                      nullable: true
                  computedValues:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationState:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                required:
                  - id
                  - schemaId
                  - entityId
                  - entityType
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - formData
                  - computedValues
                  - validationState
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
        "404":
          description: Planning data not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    put:
      tags:
        - planning
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Planning data updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schemaId:
                  type: integer
                projectId:
                  type: integer
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                formData:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
      responses:
        "200":
          description: Updated planning data
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  schemaId:
                    type: integer
                  entityId:
                    type: integer
                    nullable: true
                  entityType:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                    nullable: true
                  formData:
                    type: object
                    additionalProperties:
                      nullable: true
                  computedValues:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationState:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                required:
                  - id
                  - schemaId
                  - entityId
                  - entityType
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - formData
                  - computedValues
                  - validationState
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
        "404":
          description: Planning data not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - planning
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: Planning data deleted successfully
        "404":
          description: Planning data not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/planning/calculate-totals:
    post:
      tags:
        - planning
      requestBody:
        description: Data for calculation
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                planningId:
                  type: integer
                data:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - planningId
                - data
      responses:
        "200":
          description: Calculated planning totals
          content:
            application/json:
              schema:
                type: object
                properties:
                  quarterlyTotals:
                    type: object
                    properties:
                      q1:
                        type: number
                      q2:
                        type: number
                      q3:
                        type: number
                      q4:
                        type: number
                    required:
                      - q1
                      - q2
                      - q3
                      - q4
                  annualTotal:
                    type: number
                  categoryTotals:
                    type: object
                    additionalProperties:
                      type: number
                  computedValues:
                    type: object
                    additionalProperties:
                      nullable: true
                required:
                  - quarterlyTotals
                  - annualTotal
                  - categoryTotals
                  - computedValues
  /api/planning/validate:
    post:
      tags:
        - planning
      requestBody:
        description: Data to validate
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schemaId:
                  type: integer
                data:
                  type: object
                  additionalProperties:
                    nullable: true
                context:
                  type: object
                  properties:
                    projectType:
                      type: string
                      enum:
                        - HIV
                        - Malaria
                        - TB
                    facilityType:
                      type: string
                      enum:
                        - hospital
                        - health_center
                    reportingPeriod:
                      type: string
                  required:
                    - projectType
                    - facilityType
              required:
                - schemaId
                - data
      responses:
        "200":
          description: Validation results
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                        code:
                          type: string
                      required:
                        - field
                        - message
                        - code
                  computedValues:
                    type: object
                    additionalProperties:
                      nullable: true
                required:
                  - isValid
                  - errors
                  - computedValues
  
  /api/provinces:
    get:
      tags:
        - provinces
      responses:
        "200":
          description: The list of provinces
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                  required:
                    - id
                    - name
  /api/provinces/{id}:
    get:
      tags:
        - provinces
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The province
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                required:
                  - id
                  - name
        "404":
          description: Province not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "422":
          description: Invalid province ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: object
                    properties:
                      issues:
                        type: array
                        items:
                          type: object
                          properties:
                            code:
                              type: string
                            path:
                              type: array
                              items:
                                anyOf:
                                  - type: string
                                  - type: number
                            message:
                              type: string
                          required:
                            - code
                            - path
                      name:
                        type: string
                    required:
                      - issues
                      - name
                    example:
                      name: ZodError
                      issues:
                        - code: invalid_type
                          path:
                            - id
                          message: "Invalid input: expected number, received NaN"
                required:
                  - success
                  - error
  
  /api/reporting-periods/current:
    get:
      tags:
        - reporting-periods
      responses:
        "200":
          description: Current active reporting period
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  year:
                    type: integer
                  periodType:
                    type: string
                  startDate:
                    type: string
                  endDate:
                    type: string
                  status:
                    type: string
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - year
                  - periodType
                  - startDate
                  - endDate
                  - status
                  - createdAt
                  - updatedAt
        "404":
          description: No current active reporting period found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/reporting-periods/stats:
    get:
      tags:
        - reporting-periods
      responses:
        "200":
          description: Reporting periods statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalPeriods:
                    type: number
                  activePeriods:
                    type: number
                  yearRange:
                    type: object
                    properties:
                      earliest:
                        type: number
                      latest:
                        type: number
                    required:
                      - earliest
                      - latest
                  periodTypeDistribution:
                    type: object
                    additionalProperties:
                      type: number
                required:
                  - totalPeriods
                  - activePeriods
                  - yearRange
                  - periodTypeDistribution
  /api/reporting-periods:
    get:
      tags:
        - reporting-periods
      parameters:
        - schema:
            type: string
          required: false
          name: year
          in: query
        - schema:
            type: string
          required: false
          name: periodType
          in: query
        - schema:
            type: string
          required: false
          name: status
          in: query
        - schema:
            type: string
          required: false
          name: startYear
          in: query
        - schema:
            type: string
          required: false
          name: endYear
          in: query
        - schema:
            type: string
          required: false
          name: limit
          in: query
        - schema:
            type: string
          required: false
          name: offset
          in: query
      responses:
        "200":
          description: List of reporting periods with pagination
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        year:
                          type: integer
                        periodType:
                          type: string
                        startDate:
                          type: string
                        endDate:
                          type: string
                        status:
                          type: string
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - year
                        - periodType
                        - startDate
                        - endDate
                        - status
                        - createdAt
                        - updatedAt
                  pagination:
                    type: object
                    properties:
                      total:
                        type: number
                      limit:
                        type: number
                      offset:
                        type: number
                      hasMore:
                        type: boolean
                    required:
                      - total
                      - limit
                      - offset
                      - hasMore
                required:
                  - data
                  - pagination
    post:
      tags:
        - reporting-periods
      requestBody:
        description: Reporting period data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                year:
                  type: integer
                  minimum: 2020
                  maximum: 2050
                periodType:
                  type: string
                  default: ANNUAL
                startDate:
                  type: string
                  pattern: ^\d{4}-\d{2}-\d{2}$
                endDate:
                  type: string
                  pattern: ^\d{4}-\d{2}-\d{2}$
                status:
                  type: string
                  default: ACTIVE
              required:
                - year
                - startDate
                - endDate
      responses:
        "201":
          description: The created reporting period
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  year:
                    type: integer
                  periodType:
                    type: string
                  startDate:
                    type: string
                  endDate:
                    type: string
                  status:
                    type: string
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - year
                  - periodType
                  - startDate
                  - endDate
                  - status
                  - createdAt
                  - updatedAt
        "409":
          description: Reporting period already exists for the given year and period type
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  conflictField:
                    type: string
                required:
                  - message
                  - conflictField
  /api/reporting-periods/{id}:
    get:
      tags:
        - reporting-periods
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The reporting period
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  year:
                    type: integer
                  periodType:
                    type: string
                  startDate:
                    type: string
                  endDate:
                    type: string
                  status:
                    type: string
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - year
                  - periodType
                  - startDate
                  - endDate
                  - status
                  - createdAt
                  - updatedAt
        "404":
          description: Reporting period not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    patch:
      tags:
        - reporting-periods
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Fields to update
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                year:
                  type: integer
                  minimum: 2020
                  maximum: 2050
                periodType:
                  type: string
                  default: ANNUAL
                startDate:
                  type: string
                  pattern: ^\d{4}-\d{2}-\d{2}$
                endDate:
                  type: string
                  pattern: ^\d{4}-\d{2}-\d{2}$
                status:
                  type: string
                  default: ACTIVE
      responses:
        "200":
          description: The updated reporting period
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  year:
                    type: integer
                  periodType:
                    type: string
                  startDate:
                    type: string
                  endDate:
                    type: string
                  status:
                    type: string
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - year
                  - periodType
                  - startDate
                  - endDate
                  - status
                  - createdAt
                  - updatedAt
        "404":
          description: Reporting period not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "409":
          description: Update would create a conflict
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  conflictField:
                    type: string
                required:
                  - message
                  - conflictField
    delete:
      tags:
        - reporting-periods
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: Reporting period deleted successfully
        "404":
          description: Reporting period not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "409":
          description: Cannot delete reporting period due to existing dependencies
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  relatedEntities:
                    type: array
                    items:
                      type: string
                required:
                  - message
                  - relatedEntities
  /api/reporting-periods/year/{year}:
    get:
      tags:
        - reporting-periods
      parameters:
        - schema:
            type: string
          required: true
          name: year
          in: path
      responses:
        "200":
          description: Reporting periods for the specified year
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    year:
                      type: integer
                    periodType:
                      type: string
                    startDate:
                      type: string
                    endDate:
                      type: string
                    status:
                      type: string
                    createdAt:
                      type: string
                    updatedAt:
                      type: string
                  required:
                    - id
                    - year
                    - periodType
                    - startDate
                    - endDate
                    - status
                    - createdAt
                    - updatedAt
  
  /api/activities:
    get:
      tags:
        - activities
      parameters:
        - schema:
            type: number
            nullable: true
          required: false
          name: categoryId
          in: query
        - schema:
            type: string
            enum:
              - HIV
              - Malaria
              - TB
          required: false
          name: projectType
          in: query
        - schema:
            type: string
            enum:
              - hospital
              - health_center
          required: false
          name: facilityType
          in: query
        - schema:
            type: string
          required: false
          name: activityType
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
          required: false
          name: isTotalRow
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
          required: false
          name: isAnnualOnly
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
          required: false
          name: isActive
          in: query
        - schema:
            type: string
          required: false
          name: page
          in: query
        - schema:
            type: string
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: List of activities with pagination
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        categoryId:
                          type: integer
                        projectType:
                          type: string
                          nullable: true
                          enum:
                            - HIV
                            - Malaria
                            - TB
                        facilityType:
                          type: string
                          nullable: true
                          enum:
                            - hospital
                            - health_center
                        code:
                          type: string
                          nullable: true
                        name:
                          type: string
                        description:
                          type: string
                          nullable: true
                        activityType:
                          type: string
                          nullable: true
                        displayOrder:
                          type: integer
                        isTotalRow:
                          type: boolean
                        isAnnualOnly:
                          type: boolean
                        fieldMappings:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        computationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        isActive:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - categoryId
                        - projectType
                        - facilityType
                        - code
                        - name
                        - description
                        - activityType
                        - displayOrder
                        - isTotalRow
                        - isAnnualOnly
                        - fieldMappings
                        - computationRules
                        - validationRules
                        - metadata
                        - isActive
                        - createdAt
                        - updatedAt
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      pages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - pages
                required:
                  - data
                  - pagination
    post:
      tags:
        - activities
      requestBody:
        description: The activity to create
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                categoryId:
                  type: integer
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityType:
                  type: string
                  enum:
                    - hospital
                    - health_center
                code:
                  type: string
                  maxLength: 100
                name:
                  type: string
                  minLength: 1
                  maxLength: 300
                description:
                  type: string
                activityType:
                  type: string
                  maxLength: 100
                displayOrder:
                  type: integer
                isTotalRow:
                  type: boolean
                  default: false
                isAnnualOnly:
                  type: boolean
                  default: false
                fieldMappings:
                  type: object
                  additionalProperties:
                    nullable: true
                computationRules:
                  type: object
                  additionalProperties:
                    nullable: true
                validationRules:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                isActive:
                  type: boolean
                  default: true
              required:
                - categoryId
                - name
                - displayOrder
      responses:
        "201":
          description: The created activity
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  categoryId:
                    type: integer
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  code:
                    type: string
                    nullable: true
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                  activityType:
                    type: string
                    nullable: true
                  displayOrder:
                    type: integer
                  isTotalRow:
                    type: boolean
                  isAnnualOnly:
                    type: boolean
                  fieldMappings:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computationRules:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationRules:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - categoryId
                  - projectType
                  - facilityType
                  - code
                  - name
                  - description
                  - activityType
                  - displayOrder
                  - isTotalRow
                  - isAnnualOnly
                  - fieldMappings
                  - computationRules
                  - validationRules
                  - metadata
                  - isActive
                  - createdAt
                  - updatedAt
        "400":
          description: Invalid activity data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/activities/bulk:
    post:
      tags:
        - activities
      requestBody:
        description: Activities to create in bulk
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                activities:
                  type: array
                  items:
                    type: object
                    properties:
                      categoryId:
                        type: integer
                      projectType:
                        type: string
                        enum:
                          - HIV
                          - Malaria
                          - TB
                      facilityType:
                        type: string
                        enum:
                          - hospital
                          - health_center
                      code:
                        type: string
                        maxLength: 100
                      name:
                        type: string
                        minLength: 1
                        maxLength: 300
                      description:
                        type: string
                      activityType:
                        type: string
                        maxLength: 100
                      displayOrder:
                        type: integer
                      isTotalRow:
                        type: boolean
                        default: false
                      isAnnualOnly:
                        type: boolean
                        default: false
                      fieldMappings:
                        type: object
                        additionalProperties:
                          nullable: true
                      computationRules:
                        type: object
                        additionalProperties:
                          nullable: true
                      validationRules:
                        type: object
                        additionalProperties:
                          nullable: true
                      metadata:
                        type: object
                        additionalProperties:
                          nullable: true
                      isActive:
                        type: boolean
                        default: true
                    required:
                      - categoryId
                      - name
                      - displayOrder
              required:
                - activities
      responses:
        "201":
          description: Bulk create results
          content:
            application/json:
              schema:
                type: object
                properties:
                  created:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        categoryId:
                          type: integer
                        projectType:
                          type: string
                          nullable: true
                          enum:
                            - HIV
                            - Malaria
                            - TB
                        facilityType:
                          type: string
                          nullable: true
                          enum:
                            - hospital
                            - health_center
                        code:
                          type: string
                          nullable: true
                        name:
                          type: string
                        description:
                          type: string
                          nullable: true
                        activityType:
                          type: string
                          nullable: true
                        displayOrder:
                          type: integer
                        isTotalRow:
                          type: boolean
                        isAnnualOnly:
                          type: boolean
                        fieldMappings:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        computationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        isActive:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - categoryId
                        - projectType
                        - facilityType
                        - code
                        - name
                        - description
                        - activityType
                        - displayOrder
                        - isTotalRow
                        - isAnnualOnly
                        - fieldMappings
                        - computationRules
                        - validationRules
                        - metadata
                        - isActive
                        - createdAt
                        - updatedAt
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        index:
                          type: number
                        error:
                          type: string
                      required:
                        - index
                        - error
                required:
                  - created
                  - errors
        "400":
          description: Invalid bulk data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/activities/{id}:
    get:
      tags:
        - activities
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The activity
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  categoryId:
                    type: integer
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  code:
                    type: string
                    nullable: true
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                  activityType:
                    type: string
                    nullable: true
                  displayOrder:
                    type: integer
                  isTotalRow:
                    type: boolean
                  isAnnualOnly:
                    type: boolean
                  fieldMappings:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computationRules:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationRules:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - categoryId
                  - projectType
                  - facilityType
                  - code
                  - name
                  - description
                  - activityType
                  - displayOrder
                  - isTotalRow
                  - isAnnualOnly
                  - fieldMappings
                  - computationRules
                  - validationRules
                  - metadata
                  - isActive
                  - createdAt
                  - updatedAt
        "404":
          description: Activity not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    patch:
      tags:
        - activities
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: The activity data to update
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                categoryId:
                  type: integer
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityType:
                  type: string
                  enum:
                    - hospital
                    - health_center
                code:
                  type: string
                  maxLength: 100
                name:
                  type: string
                  minLength: 1
                  maxLength: 300
                description:
                  type: string
                activityType:
                  type: string
                  maxLength: 100
                displayOrder:
                  type: integer
                isTotalRow:
                  type: boolean
                  default: false
                isAnnualOnly:
                  type: boolean
                  default: false
                fieldMappings:
                  type: object
                  additionalProperties:
                    nullable: true
                computationRules:
                  type: object
                  additionalProperties:
                    nullable: true
                validationRules:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                isActive:
                  type: boolean
                  default: true
      responses:
        "200":
          description: The updated activity
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  categoryId:
                    type: integer
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  code:
                    type: string
                    nullable: true
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                  activityType:
                    type: string
                    nullable: true
                  displayOrder:
                    type: integer
                  isTotalRow:
                    type: boolean
                  isAnnualOnly:
                    type: boolean
                  fieldMappings:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computationRules:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationRules:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - categoryId
                  - projectType
                  - facilityType
                  - code
                  - name
                  - description
                  - activityType
                  - displayOrder
                  - isTotalRow
                  - isAnnualOnly
                  - fieldMappings
                  - computationRules
                  - validationRules
                  - metadata
                  - isActive
                  - createdAt
                  - updatedAt
        "404":
          description: Activity not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - activities
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: The activity was deleted
        "404":
          description: Activity not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/activities/reorder:
    patch:
      tags:
        - activities
      requestBody:
        description: Activity order updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                activityOrders:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      displayOrder:
                        type: integer
                    required:
                      - id
                      - displayOrder
              required:
                - activityOrders
      responses:
        "200":
          description: Reordered activities
          content:
            application/json:
              schema:
                type: object
                properties:
                  updated:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        categoryId:
                          type: integer
                        projectType:
                          type: string
                          nullable: true
                          enum:
                            - HIV
                            - Malaria
                            - TB
                        facilityType:
                          type: string
                          nullable: true
                          enum:
                            - hospital
                            - health_center
                        code:
                          type: string
                          nullable: true
                        name:
                          type: string
                        description:
                          type: string
                          nullable: true
                        activityType:
                          type: string
                          nullable: true
                        displayOrder:
                          type: integer
                        isTotalRow:
                          type: boolean
                        isAnnualOnly:
                          type: boolean
                        fieldMappings:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        computationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        isActive:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - categoryId
                        - projectType
                        - facilityType
                        - code
                        - name
                        - description
                        - activityType
                        - displayOrder
                        - isTotalRow
                        - isAnnualOnly
                        - fieldMappings
                        - computationRules
                        - validationRules
                        - metadata
                        - isActive
                        - createdAt
                        - updatedAt
                  message:
                    type: string
                required:
                  - updated
                  - message
        "400":
          description: Invalid reorder data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/activities/category/{categoryId}:
    get:
      tags:
        - activities
      parameters:
        - schema:
            type: string
            pattern: ^\d+$
          required: true
          name: categoryId
          in: path
        - schema:
            type: string
            enum:
              - "true"
              - "false"
            default: "false"
          required: false
          name: includeInactive
          in: query
        - schema:
            type: string
            enum:
              - HIV
              - Malaria
              - TB
          required: false
          name: projectType
          in: query
        - schema:
            type: string
            enum:
              - hospital
              - health_center
          required: false
          name: facilityType
          in: query
      responses:
        "200":
          description: Activities for the category
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    categoryId:
                      type: integer
                    projectType:
                      type: string
                      nullable: true
                      enum:
                        - HIV
                        - Malaria
                        - TB
                    facilityType:
                      type: string
                      nullable: true
                      enum:
                        - hospital
                        - health_center
                    code:
                      type: string
                      nullable: true
                    name:
                      type: string
                    description:
                      type: string
                      nullable: true
                    activityType:
                      type: string
                      nullable: true
                    displayOrder:
                      type: integer
                    isTotalRow:
                      type: boolean
                    isAnnualOnly:
                      type: boolean
                    fieldMappings:
                      type: object
                      nullable: true
                      additionalProperties:
                        nullable: true
                    computationRules:
                      type: object
                      nullable: true
                      additionalProperties:
                        nullable: true
                    validationRules:
                      type: object
                      nullable: true
                      additionalProperties:
                        nullable: true
                    metadata:
                      type: object
                      nullable: true
                      additionalProperties:
                        nullable: true
                    isActive:
                      type: boolean
                    createdAt:
                      type: string
                    updatedAt:
                      type: string
                  required:
                    - id
                    - categoryId
                    - projectType
                    - facilityType
                    - code
                    - name
                    - description
                    - activityType
                    - displayOrder
                    - isTotalRow
                    - isAnnualOnly
                    - fieldMappings
                    - computationRules
                    - validationRules
                    - metadata
                    - isActive
                    - createdAt
                    - updatedAt
  
  /api/bulk/export/report/{id}:
    post:
      tags:
        - bulk
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Export parameters
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                format:
                  type: string
                  enum:
                    - pdf
                    - excel
                    - csv
                    - json
                    - xml
                templateType:
                  type: string
                  enum:
                    - default
                    - detailed
                    - summary
                    - comparative
                    - custom
                  default: default
                includeMetadata:
                  type: boolean
                  default: true
                includeValidation:
                  type: boolean
                  default: false
                includeHistory:
                  type: boolean
                  default: false
                includeComparatives:
                  type: boolean
                  default: false
                customFields:
                  type: array
                  items:
                    type: string
                filters:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - format
      responses:
        "200":
          description: Export initiated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  exportId:
                    type: string
                  format:
                    type: string
                    enum:
                      - pdf
                      - excel
                      - csv
                      - json
                      - xml
                  filename:
                    type: string
                  fileSize:
                    type: number
                  downloadUrl:
                    type: string
                  expiresAt:
                    type: string
                  metadata:
                    type: object
                    properties:
                      recordsCount:
                        type: number
                      generatedAt:
                        type: string
                      generatedBy:
                        type: number
                      processingTime:
                        type: number
                      checksum:
                        type: string
                    required:
                      - recordsCount
                      - generatedAt
                      - generatedBy
                      - processingTime
                      - checksum
                required:
                  - exportId
                  - format
                  - filename
                  - fileSize
                  - downloadUrl
                  - expiresAt
                  - metadata
        "400":
          description: Invalid export parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: Report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/bulk/export:
    post:
      tags:
        - bulk
      requestBody:
        description: Bulk export parameters
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                exportType:
                  type: string
                  enum:
                    - financial_reports
                    - statement_templates
                    - form_schemas
                    - activities
                    - event_mappings
                    - system_configurations
                    - audit_logs
                format:
                  type: string
                  enum:
                    - pdf
                    - excel
                    - csv
                    - json
                    - xml
                filters:
                  type: object
                  properties:
                    dateRange:
                      type: object
                      properties:
                        startDate:
                          type: string
                        endDate:
                          type: string
                      required:
                        - startDate
                        - endDate
                    facilityIds:
                      type: array
                      items:
                        type: integer
                    projectIds:
                      type: array
                      items:
                        type: integer
                    status:
                      type: array
                      items:
                        type: string
                    reportingPeriodIds:
                      type: array
                      items:
                        type: integer
                includeRelations:
                  type: boolean
                  default: true
                includeInactive:
                  type: boolean
                  default: false
                compression:
                  type: boolean
                  default: true
                splitFiles:
                  type: boolean
                  default: false
                maxFileSize:
                  type: number
                  default: 52428800
              required:
                - exportType
                - format
      responses:
        "202":
          description: Bulk export queued successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  exportId:
                    type: string
                  status:
                    type: string
                    enum:
                      - queued
                      - processing
                      - completed
                      - failed
                      - cancelled
                  progress:
                    type: object
                    properties:
                      current:
                        type: number
                      total:
                        type: number
                      percentage:
                        type: number
                      stage:
                        type: string
                    required:
                      - current
                      - total
                      - percentage
                      - stage
                  files:
                    type: array
                    items:
                      type: object
                      properties:
                        filename:
                          type: string
                        format:
                          type: string
                          enum:
                            - pdf
                            - excel
                            - csv
                            - json
                            - xml
                        fileSize:
                          type: number
                        recordCount:
                          type: number
                        downloadUrl:
                          type: string
                      required:
                        - filename
                        - format
                        - fileSize
                        - recordCount
                        - downloadUrl
                  metadata:
                    type: object
                    properties:
                      totalRecords:
                        type: number
                      totalFiles:
                        type: number
                      startedAt:
                        type: string
                      completedAt:
                        type: string
                      estimatedTimeRemaining:
                        type: number
                    required:
                      - totalRecords
                      - totalFiles
                      - startedAt
                required:
                  - exportId
                  - status
                  - progress
                  - metadata
        "400":
          description: Invalid export parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/bulk/export/{exportId}/status:
    get:
      tags:
        - bulk
      parameters:
        - schema:
            type: string
          required: true
          name: exportId
          in: path
      responses:
        "200":
          description: Export status retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  exportId:
                    type: string
                  status:
                    type: string
                    enum:
                      - queued
                      - processing
                      - completed
                      - failed
                      - cancelled
                  progress:
                    type: object
                    properties:
                      current:
                        type: number
                      total:
                        type: number
                      percentage:
                        type: number
                      stage:
                        type: string
                      message:
                        type: string
                    required:
                      - current
                      - total
                      - percentage
                      - stage
                  startedAt:
                    type: string
                  completedAt:
                    type: string
                  estimatedTimeRemaining:
                    type: number
                  error:
                    type: string
                required:
                  - exportId
                  - status
                  - progress
                  - startedAt
        "404":
          description: Export job not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/bulk/export/{exportId}/download:
    get:
      tags:
        - bulk
      parameters:
        - schema:
            type: string
          required: true
          name: exportId
          in: path
        - schema:
            type: integer
          required: false
          name: fileIndex
          in: query
      responses:
        "200":
          description: File download
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
            application/pdf:
              schema:
                type: string
                format: binary
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
            text/csv:
              schema:
                type: string
            application/json:
              schema:
                type: string
        "404":
          description: Export file not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/bulk/export/{exportId}/cancel:
    post:
      tags:
        - bulk
      parameters:
        - schema:
            type: string
          required: true
          name: exportId
          in: path
      responses:
        "200":
          description: Export cancelled successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "400":
          description: Cannot cancel export in current state
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: Export job not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/bulk/migration-export:
    post:
      tags:
        - bulk
      requestBody:
        description: Migration export parameters
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                sourceSystem:
                  type: string
                targetFormat:
                  type: string
                  enum:
                    - pdf
                    - excel
                    - csv
                    - json
                    - xml
                migrationScope:
                  type: string
                  enum:
                    - full_system
                    - selective_data
                    - configuration_only
                dataMapping:
                  type: object
                  additionalProperties:
                    nullable: true
                transformationRules:
                  type: array
                  items:
                    type: object
                    properties:
                      sourceField:
                        type: string
                      targetField:
                        type: string
                      transformation:
                        type: string
                    required:
                      - sourceField
                      - targetField
                      - transformation
                validateData:
                  type: boolean
                  default: true
                createBackup:
                  type: boolean
                  default: true
              required:
                - sourceSystem
                - targetFormat
                - migrationScope
      responses:
        "202":
          description: Migration export queued successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  exportId:
                    type: string
                  status:
                    type: string
                    enum:
                      - queued
                      - processing
                      - completed
                      - failed
                      - cancelled
                  progress:
                    type: object
                    properties:
                      current:
                        type: number
                      total:
                        type: number
                      percentage:
                        type: number
                      stage:
                        type: string
                    required:
                      - current
                      - total
                      - percentage
                      - stage
                  files:
                    type: array
                    items:
                      type: object
                      properties:
                        filename:
                          type: string
                        format:
                          type: string
                          enum:
                            - pdf
                            - excel
                            - csv
                            - json
                            - xml
                        fileSize:
                          type: number
                        recordCount:
                          type: number
                        downloadUrl:
                          type: string
                      required:
                        - filename
                        - format
                        - fileSize
                        - recordCount
                        - downloadUrl
                  metadata:
                    type: object
                    properties:
                      totalRecords:
                        type: number
                      totalFiles:
                        type: number
                      startedAt:
                        type: string
                      completedAt:
                        type: string
                      estimatedTimeRemaining:
                        type: number
                    required:
                      - totalRecords
                      - totalFiles
                      - startedAt
                required:
                  - exportId
                  - status
                  - progress
                  - metadata
        "400":
          description: Invalid migration parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/bulk/export-templates:
    get:
      tags:
        - bulk
      parameters:
        - schema:
            type: string
          required: false
          name: templateType
          in: query
        - schema:
            type: string
          required: false
          name: format
          in: query
        - schema:
            type: boolean
          required: false
          name: isPublic
          in: query
        - schema:
            type: integer
          required: false
          name: createdBy
          in: query
        - schema:
            type: integer
            default: 1
          required: false
          name: page
          in: query
        - schema:
            type: integer
            default: 20
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: Export templates retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  templates:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
                          minLength: 1
                          maxLength: 100
                        description:
                          type: string
                        templateType:
                          type: string
                          enum:
                            - default
                            - detailed
                            - summary
                            - comparative
                            - custom
                        format:
                          type: string
                          enum:
                            - pdf
                            - excel
                            - csv
                            - json
                            - xml
                        scope:
                          type: string
                          enum:
                            - single_report
                            - multiple_reports
                            - bulk_data
                            - system_backup
                        configuration:
                          type: object
                          additionalProperties:
                            nullable: true
                        isActive:
                          type: boolean
                          default: true
                        isPublic:
                          type: boolean
                          default: false
                        createdBy:
                          type: integer
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - name
                        - templateType
                        - format
                        - scope
                        - configuration
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                required:
                  - templates
                  - pagination
    post:
      tags:
        - bulk
      requestBody:
        description: Export template
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                description:
                  type: string
                templateType:
                  type: string
                  enum:
                    - default
                    - detailed
                    - summary
                    - comparative
                    - custom
                format:
                  type: string
                  enum:
                    - pdf
                    - excel
                    - csv
                    - json
                    - xml
                scope:
                  type: string
                  enum:
                    - single_report
                    - multiple_reports
                    - bulk_data
                    - system_backup
                configuration:
                  type: object
                  additionalProperties:
                    nullable: true
                isActive:
                  type: boolean
                  default: true
                isPublic:
                  type: boolean
                  default: false
                createdBy:
                  type: integer
              required:
                - name
                - templateType
                - format
                - scope
                - configuration
      responses:
        "201":
          description: Export template created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                    minLength: 1
                    maxLength: 100
                  description:
                    type: string
                  templateType:
                    type: string
                    enum:
                      - default
                      - detailed
                      - summary
                      - comparative
                      - custom
                  format:
                    type: string
                    enum:
                      - pdf
                      - excel
                      - csv
                      - json
                      - xml
                  scope:
                    type: string
                    enum:
                      - single_report
                      - multiple_reports
                      - bulk_data
                      - system_backup
                  configuration:
                    type: object
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                    default: true
                  isPublic:
                    type: boolean
                    default: false
                  createdBy:
                    type: integer
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - name
                  - templateType
                  - format
                  - scope
                  - configuration
        "400":
          description: Invalid template data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/bulk/export-templates/{id}:
    get:
      tags:
        - bulk
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: Export template retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                    minLength: 1
                    maxLength: 100
                  description:
                    type: string
                  templateType:
                    type: string
                    enum:
                      - default
                      - detailed
                      - summary
                      - comparative
                      - custom
                  format:
                    type: string
                    enum:
                      - pdf
                      - excel
                      - csv
                      - json
                      - xml
                  scope:
                    type: string
                    enum:
                      - single_report
                      - multiple_reports
                      - bulk_data
                      - system_backup
                  configuration:
                    type: object
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                    default: true
                  isPublic:
                    type: boolean
                    default: false
                  createdBy:
                    type: integer
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - name
                  - templateType
                  - format
                  - scope
                  - configuration
        "404":
          description: Export template not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    put:
      tags:
        - bulk
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Export template updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                description:
                  type: string
                templateType:
                  type: string
                  enum:
                    - default
                    - detailed
                    - summary
                    - comparative
                    - custom
                format:
                  type: string
                  enum:
                    - pdf
                    - excel
                    - csv
                    - json
                    - xml
                scope:
                  type: string
                  enum:
                    - single_report
                    - multiple_reports
                    - bulk_data
                    - system_backup
                configuration:
                  type: object
                  additionalProperties:
                    nullable: true
                isActive:
                  type: boolean
                  default: true
                isPublic:
                  type: boolean
                  default: false
                createdBy:
                  type: integer
      responses:
        "200":
          description: Export template updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                    minLength: 1
                    maxLength: 100
                  description:
                    type: string
                  templateType:
                    type: string
                    enum:
                      - default
                      - detailed
                      - summary
                      - comparative
                      - custom
                  format:
                    type: string
                    enum:
                      - pdf
                      - excel
                      - csv
                      - json
                      - xml
                  scope:
                    type: string
                    enum:
                      - single_report
                      - multiple_reports
                      - bulk_data
                      - system_backup
                  configuration:
                    type: object
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                    default: true
                  isPublic:
                    type: boolean
                    default: false
                  createdBy:
                    type: integer
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - name
                  - templateType
                  - format
                  - scope
                  - configuration
        "400":
          description: Invalid template data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: Export template not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - bulk
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: Export template deleted successfully
        "404":
          description: Export template not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  
  /api/categories:
    get:
      tags:
        - categories
      parameters:
        - schema:
            type: string
            enum:
              - HIV
              - Malaria
              - TB
          required: false
          name: projectType
          in: query
        - schema:
            type: string
            enum:
              - hospital
              - health_center
          required: false
          name: facilityType
          in: query
        - schema:
            type: string
          required: false
          name: parentCategoryId
          in: query
        - schema:
            type: string
          required: false
          name: isActive
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
            default: "false"
          required: false
          name: includeHierarchy
          in: query
        - schema:
            type: string
            default: "1"
          required: false
          name: page
          in: query
        - schema:
            type: string
            default: "20"
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: List of categories with pagination
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        projectType:
                          type: string
                          nullable: true
                          enum:
                            - HIV
                            - Malaria
                            - TB
                        facilityType:
                          type: string
                          nullable: true
                          enum:
                            - hospital
                            - health_center
                        code:
                          type: string
                        name:
                          type: string
                        description:
                          type: string
                          nullable: true
                        displayOrder:
                          type: integer
                        parentCategoryId:
                          type: integer
                          nullable: true
                        isComputed:
                          type: boolean
                        computationFormula:
                          type: string
                          nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        isActive:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - projectType
                        - facilityType
                        - code
                        - name
                        - description
                        - displayOrder
                        - parentCategoryId
                        - isComputed
                        - computationFormula
                        - metadata
                        - isActive
                        - createdAt
                        - updatedAt
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      pages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - pages
                required:
                  - data
                  - pagination
    post:
      tags:
        - categories
      requestBody:
        description: The category to create
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityType:
                  type: string
                  enum:
                    - hospital
                    - health_center
                code:
                  type: string
                  minLength: 1
                  maxLength: 50
                name:
                  type: string
                  minLength: 1
                  maxLength: 200
                description:
                  type: string
                displayOrder:
                  type: integer
                parentCategoryId:
                  type: integer
                isComputed:
                  type: boolean
                  default: false
                computationFormula:
                  type: string
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                isActive:
                  type: boolean
                  default: true
              required:
                - code
                - name
                - displayOrder
      responses:
        "201":
          description: The created category
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  code:
                    type: string
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                  displayOrder:
                    type: integer
                  parentCategoryId:
                    type: integer
                    nullable: true
                  isComputed:
                    type: boolean
                  computationFormula:
                    type: string
                    nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - projectType
                  - facilityType
                  - code
                  - name
                  - description
                  - displayOrder
                  - parentCategoryId
                  - isComputed
                  - computationFormula
                  - metadata
                  - isActive
                  - createdAt
                  - updatedAt
        "400":
          description: Invalid category data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/categories/{id}:
    get:
      tags:
        - categories
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The category
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  code:
                    type: string
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                  displayOrder:
                    type: integer
                  parentCategoryId:
                    type: integer
                    nullable: true
                  isComputed:
                    type: boolean
                  computationFormula:
                    type: string
                    nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - projectType
                  - facilityType
                  - code
                  - name
                  - description
                  - displayOrder
                  - parentCategoryId
                  - isComputed
                  - computationFormula
                  - metadata
                  - isActive
                  - createdAt
                  - updatedAt
        "404":
          description: Category not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    patch:
      tags:
        - categories
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: The category data to update
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityType:
                  type: string
                  enum:
                    - hospital
                    - health_center
                code:
                  type: string
                  minLength: 1
                  maxLength: 50
                name:
                  type: string
                  minLength: 1
                  maxLength: 200
                description:
                  type: string
                displayOrder:
                  type: integer
                parentCategoryId:
                  type: integer
                isComputed:
                  type: boolean
                  default: false
                computationFormula:
                  type: string
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                isActive:
                  type: boolean
                  default: true
      responses:
        "200":
          description: The updated category
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  code:
                    type: string
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                  displayOrder:
                    type: integer
                  parentCategoryId:
                    type: integer
                    nullable: true
                  isComputed:
                    type: boolean
                  computationFormula:
                    type: string
                    nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - projectType
                  - facilityType
                  - code
                  - name
                  - description
                  - displayOrder
                  - parentCategoryId
                  - isComputed
                  - computationFormula
                  - metadata
                  - isActive
                  - createdAt
                  - updatedAt
        "404":
          description: Category not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - categories
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: The category was deleted
        "404":
          description: Category not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/categories/hierarchy:
    get:
      tags:
        - categories
      parameters:
        - schema:
            type: string
            enum:
              - HIV
              - Malaria
              - TB
          required: false
          name: projectType
          in: query
        - schema:
            type: string
            enum:
              - hospital
              - health_center
          required: false
          name: facilityType
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
            default: "false"
          required: false
          name: rootOnly
          in: query
      responses:
        "200":
          description: Hierarchical category structure
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    code:
                      type: string
                    name:
                      type: string
                    displayOrder:
                      type: integer
                    children:
                      type: array
                      items:
                        nullable: true
                  required:
                    - id
                    - code
                    - name
                    - displayOrder
  
  /api/financial-reports:
    get:
      tags:
        - financial-reports
      parameters:
        - schema:
            type: integer
          required: false
          name: projectId
          in: query
        - schema:
            type: integer
          required: false
          name: facilityId
          in: query
        - schema:
            type: integer
          required: false
          name: reportingPeriodId
          in: query
        - schema:
            type: string
          required: false
          name: fiscalYear
          in: query
        - schema:
            type: string
            enum:
              - draft
              - submitted
              - approved
              - rejected
          required: false
          name: status
          in: query
        - schema:
            type: string
            enum:
              - revenue_expenditure
              - balance_sheet
              - cash_flow
              - budget_vs_actual
              - net_assets_changes
          required: false
          name: reportType
          in: query
        - schema:
            type: integer
          required: false
          name: createdBy
          in: query
        - schema:
            type: string
          required: false
          name: fromDate
          in: query
        - schema:
            type: string
          required: false
          name: toDate
          in: query
        - schema:
            type: integer
            default: 1
          required: false
          name: page
          in: query
        - schema:
            type: integer
            default: 20
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: Financial reports retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  reports:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        reportCode:
                          type: string
                        title:
                          type: string
                        projectId:
                          type: integer
                        facilityId:
                          type: integer
                        reportingPeriodId:
                          type: integer
                        version:
                          type: string
                        fiscalYear:
                          type: string
                        status:
                          type: string
                          enum:
                            - draft
                            - submitted
                            - approved
                            - rejected
                        reportData:
                          type: object
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        computedTotals:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationResults:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        createdBy:
                          type: integer
                          nullable: true
                        createdAt:
                          type: string
                        updatedBy:
                          type: integer
                          nullable: true
                        updatedAt:
                          type: string
                        submittedBy:
                          type: integer
                          nullable: true
                        submittedAt:
                          type: string
                          nullable: true
                        approvedBy:
                          type: integer
                          nullable: true
                        approvedAt:
                          type: string
                          nullable: true
                        project:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            code:
                              type: string
                            projectType:
                              type: string
                              nullable: true
                          required:
                            - id
                            - name
                            - code
                            - projectType
                        facility:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            facilityType:
                              type: string
                            district:
                              type: object
                              properties:
                                id:
                                  type: number
                                name:
                                  type: string
                              required:
                                - id
                                - name
                          required:
                            - id
                            - name
                            - facilityType
                        reportingPeriod:
                          type: object
                          properties:
                            id:
                              type: number
                            year:
                              type: number
                            periodType:
                              type: string
                            startDate:
                              type: string
                            endDate:
                              type: string
                          required:
                            - id
                            - year
                            - periodType
                            - startDate
                            - endDate
                        creator:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            email:
                              type: string
                          required:
                            - id
                            - name
                            - email
                        submitter:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            email:
                              type: string
                          required:
                            - id
                            - name
                            - email
                        approver:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            email:
                              type: string
                          required:
                            - id
                            - name
                            - email
                      required:
                        - id
                        - reportCode
                        - title
                        - projectId
                        - facilityId
                        - reportingPeriodId
                        - version
                        - fiscalYear
                        - status
                        - reportData
                        - metadata
                        - computedTotals
                        - validationResults
                        - createdBy
                        - createdAt
                        - updatedBy
                        - updatedAt
                        - submittedBy
                        - submittedAt
                        - approvedBy
                        - approvedAt
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                  summary:
                    type: object
                    properties:
                      totalReports:
                        type: number
                      byStatus:
                        type: object
                        additionalProperties:
                          nullable: true
                      byType:
                        type: object
                        additionalProperties:
                          nullable: true
                      pendingApproval:
                        type: number
                    required:
                      - totalReports
                      - byStatus
                      - byType
                      - pendingApproval
                required:
                  - reports
                  - pagination
    post:
      tags:
        - financial-reports
      requestBody:
        description: Financial report data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reportCode:
                  type: string
                  minLength: 1
                  maxLength: 50
                title:
                  type: string
                  minLength: 1
                  maxLength: 300
                projectId:
                  type: integer
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                version:
                  type: string
                  default: "1.0"
                fiscalYear:
                  type: string
                  minLength: 1
                  maxLength: 10
                status:
                  type: string
                  enum:
                    - draft
                    - submitted
                    - approved
                    - rejected
                  default: draft
                reportData:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                computedTotals:
                  type: object
                  additionalProperties:
                    nullable: true
                validationResults:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - reportCode
                - title
                - projectId
                - facilityId
                - reportingPeriodId
                - fiscalYear
                - reportData
      responses:
        "201":
          description: Financial report created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  reportCode:
                    type: string
                  title:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                  version:
                    type: string
                  fiscalYear:
                    type: string
                  status:
                    type: string
                    enum:
                      - draft
                      - submitted
                      - approved
                      - rejected
                  reportData:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computedTotals:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationResults:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                  submittedBy:
                    type: integer
                    nullable: true
                  submittedAt:
                    type: string
                    nullable: true
                  approvedBy:
                    type: integer
                    nullable: true
                  approvedAt:
                    type: string
                    nullable: true
                required:
                  - id
                  - reportCode
                  - title
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - version
                  - fiscalYear
                  - status
                  - reportData
                  - metadata
                  - computedTotals
                  - validationResults
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
                  - submittedBy
                  - submittedAt
                  - approvedBy
                  - approvedAt
        "400":
          description: Invalid financial report data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/financial-reports/{id}:
    get:
      tags:
        - financial-reports
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: Financial report retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  reportCode:
                    type: string
                  title:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                  version:
                    type: string
                  fiscalYear:
                    type: string
                  status:
                    type: string
                    enum:
                      - draft
                      - submitted
                      - approved
                      - rejected
                  reportData:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computedTotals:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationResults:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                  submittedBy:
                    type: integer
                    nullable: true
                  submittedAt:
                    type: string
                    nullable: true
                  approvedBy:
                    type: integer
                    nullable: true
                  approvedAt:
                    type: string
                    nullable: true
                  project:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      code:
                        type: string
                      projectType:
                        type: string
                        nullable: true
                    required:
                      - id
                      - name
                      - code
                      - projectType
                  facility:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      facilityType:
                        type: string
                      district:
                        type: object
                        properties:
                          id:
                            type: number
                          name:
                            type: string
                        required:
                          - id
                          - name
                    required:
                      - id
                      - name
                      - facilityType
                  reportingPeriod:
                    type: object
                    properties:
                      id:
                        type: number
                      year:
                        type: number
                      periodType:
                        type: string
                      startDate:
                        type: string
                      endDate:
                        type: string
                    required:
                      - id
                      - year
                      - periodType
                      - startDate
                      - endDate
                  creator:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                    required:
                      - id
                      - name
                      - email
                  submitter:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                    required:
                      - id
                      - name
                      - email
                  approver:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                    required:
                      - id
                      - name
                      - email
                required:
                  - id
                  - reportCode
                  - title
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - version
                  - fiscalYear
                  - status
                  - reportData
                  - metadata
                  - computedTotals
                  - validationResults
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
                  - submittedBy
                  - submittedAt
                  - approvedBy
                  - approvedAt
        "404":
          description: Financial report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    put:
      tags:
        - financial-reports
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Financial report updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reportCode:
                  type: string
                  minLength: 1
                  maxLength: 50
                title:
                  type: string
                  minLength: 1
                  maxLength: 300
                projectId:
                  type: integer
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                version:
                  type: string
                  default: "1.0"
                fiscalYear:
                  type: string
                  minLength: 1
                  maxLength: 10
                status:
                  type: string
                  enum:
                    - draft
                    - submitted
                    - approved
                    - rejected
                  default: draft
                reportData:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                computedTotals:
                  type: object
                  additionalProperties:
                    nullable: true
                validationResults:
                  type: object
                  additionalProperties:
                    nullable: true
      responses:
        "200":
          description: Financial report updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  reportCode:
                    type: string
                  title:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                  version:
                    type: string
                  fiscalYear:
                    type: string
                  status:
                    type: string
                    enum:
                      - draft
                      - submitted
                      - approved
                      - rejected
                  reportData:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computedTotals:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationResults:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                  submittedBy:
                    type: integer
                    nullable: true
                  submittedAt:
                    type: string
                    nullable: true
                  approvedBy:
                    type: integer
                    nullable: true
                  approvedAt:
                    type: string
                    nullable: true
                required:
                  - id
                  - reportCode
                  - title
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - version
                  - fiscalYear
                  - status
                  - reportData
                  - metadata
                  - computedTotals
                  - validationResults
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
                  - submittedBy
                  - submittedAt
                  - approvedBy
                  - approvedAt
        "404":
          description: Financial report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - financial-reports
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: Financial report deleted successfully
        "404":
          description: Financial report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/financial-reports/generate:
    post:
      tags:
        - financial-reports
      requestBody:
        description: Report generation parameters
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                templateType:
                  type: string
                  enum:
                    - revenue_expenditure
                    - balance_sheet
                    - cash_flow
                    - budget_vs_actual
                    - net_assets_changes
                projectId:
                  type: integer
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                fiscalYear:
                  type: string
                title:
                  type: string
                includeComparatives:
                  type: boolean
                  default: false
                customMappings:
                  type: object
                  additionalProperties:
                    nullable: true
                generateFromPlanning:
                  type: boolean
                  default: false
                generateFromExecution:
                  type: boolean
                  default: true
              required:
                - templateType
                - projectId
                - facilityId
                - reportingPeriodId
                - fiscalYear
      responses:
        "201":
          description: Financial report generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  report:
                    type: object
                    properties:
                      id:
                        type: integer
                      reportCode:
                        type: string
                      title:
                        type: string
                      projectId:
                        type: integer
                      facilityId:
                        type: integer
                      reportingPeriodId:
                        type: integer
                      version:
                        type: string
                      fiscalYear:
                        type: string
                      status:
                        type: string
                        enum:
                          - draft
                          - submitted
                          - approved
                          - rejected
                      reportData:
                        type: object
                        additionalProperties:
                          nullable: true
                      metadata:
                        type: object
                        nullable: true
                        additionalProperties:
                          nullable: true
                      computedTotals:
                        type: object
                        nullable: true
                        additionalProperties:
                          nullable: true
                      validationResults:
                        type: object
                        nullable: true
                        additionalProperties:
                          nullable: true
                      createdBy:
                        type: integer
                        nullable: true
                      createdAt:
                        type: string
                      updatedBy:
                        type: integer
                        nullable: true
                      updatedAt:
                        type: string
                      submittedBy:
                        type: integer
                        nullable: true
                      submittedAt:
                        type: string
                        nullable: true
                      approvedBy:
                        type: integer
                        nullable: true
                      approvedAt:
                        type: string
                        nullable: true
                    required:
                      - id
                      - reportCode
                      - title
                      - projectId
                      - facilityId
                      - reportingPeriodId
                      - version
                      - fiscalYear
                      - status
                      - reportData
                      - metadata
                      - computedTotals
                      - validationResults
                      - createdBy
                      - createdAt
                      - updatedBy
                      - updatedAt
                      - submittedBy
                      - submittedAt
                      - approvedBy
                      - approvedAt
                  generationSummary:
                    type: object
                    properties:
                      linesProcessed:
                        type: number
                      valuesComputed:
                        type: number
                      validationErrors:
                        type: array
                        items:
                          type: string
                      warnings:
                        type: array
                        items:
                          type: string
                    required:
                      - linesProcessed
                      - valuesComputed
                      - validationErrors
                      - warnings
                required:
                  - report
                  - generationSummary
        "400":
          description: Invalid report generation parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: string
                required:
                  - message
  /api/financial-reports/{id}/calculate-totals:
    post:
      tags:
        - financial-reports
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Calculation parameters
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                recalculateAll:
                  type: boolean
                  default: false
      responses:
        "200":
          description: Report totals calculated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportId:
                    type: integer
                  computedTotals:
                    type: object
                    additionalProperties:
                      nullable: true
                  validationResults:
                    type: object
                    additionalProperties:
                      nullable: true
                  calculationSummary:
                    type: object
                    properties:
                      linesCalculated:
                        type: number
                      totalValue:
                        type: number
                      balanceValidation:
                        type: boolean
                      errors:
                        type: array
                        items:
                          type: string
                    required:
                      - linesCalculated
                      - totalValue
                      - balanceValidation
                      - errors
                required:
                  - reportId
                  - computedTotals
                  - validationResults
                  - calculationSummary
        "404":
          description: Financial report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/financial-reports/{id}/validate:
    post:
      tags:
        - financial-reports
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Validation parameters
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reportId:
                  type: integer
                validationType:
                  type: string
                  enum:
                    - accounting_equation
                    - completeness
                    - business_rules
                    - all
                  default: all
              required:
                - reportId
      responses:
        "200":
          description: Report validation completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportId:
                    type: integer
                  isValid:
                    type: boolean
                  validationResults:
                    type: object
                    properties:
                      accountingEquation:
                        type: object
                        properties:
                          isValid:
                            type: boolean
                          leftSide:
                            type: number
                          rightSide:
                            type: number
                          difference:
                            type: number
                        required:
                          - isValid
                          - leftSide
                          - rightSide
                          - difference
                      completeness:
                        type: object
                        properties:
                          isValid:
                            type: boolean
                          missingFields:
                            type: array
                            items:
                              type: string
                          completionPercentage:
                            type: number
                        required:
                          - isValid
                          - missingFields
                          - completionPercentage
                      businessRules:
                        type: object
                        properties:
                          isValid:
                            type: boolean
                          violations:
                            type: array
                            items:
                              type: object
                              properties:
                                rule:
                                  type: string
                                field:
                                  type: string
                                message:
                                  type: string
                              required:
                                - rule
                                - field
                                - message
                        required:
                          - isValid
                          - violations
                    required:
                      - accountingEquation
                      - completeness
                      - businessRules
                  errors:
                    type: array
                    items:
                      type: string
                  warnings:
                    type: array
                    items:
                      type: string
                required:
                  - reportId
                  - isValid
                  - validationResults
                  - errors
                  - warnings
        "404":
          description: Financial report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/financial-reports/{id}/export/{format}:
    get:
      tags:
        - financial-reports
      parameters:
        - schema:
            type: string
          required: true
          name: id
          in: path
        - schema:
            type: string
            enum:
              - pdf
              - excel
              - csv
          required: true
          name: format
          in: path
        - schema:
            type: boolean
          required: false
          name: includeComparatives
          in: query
        - schema:
            type: string
          required: false
          name: template
          in: query
      responses:
        "200":
          description: Report exported successfully
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
            text/csv:
              schema:
                type: string
        "404":
          description: Financial report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/financial-reports/{id}/duplicate:
    post:
      tags:
        - financial-reports
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Duplication parameters
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                fiscalYear:
                  type: string
                reportingPeriodId:
                  type: integer
                resetStatus:
                  type: boolean
                  default: true
      responses:
        "201":
          description: Report duplicated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  reportCode:
                    type: string
                  title:
                    type: string
                  projectId:
                    type: integer
                  facilityId:
                    type: integer
                  reportingPeriodId:
                    type: integer
                  version:
                    type: string
                  fiscalYear:
                    type: string
                  status:
                    type: string
                    enum:
                      - draft
                      - submitted
                      - approved
                      - rejected
                  reportData:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computedTotals:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationResults:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedBy:
                    type: integer
                    nullable: true
                  updatedAt:
                    type: string
                  submittedBy:
                    type: integer
                    nullable: true
                  submittedAt:
                    type: string
                    nullable: true
                  approvedBy:
                    type: integer
                    nullable: true
                  approvedAt:
                    type: string
                    nullable: true
                required:
                  - id
                  - reportCode
                  - title
                  - projectId
                  - facilityId
                  - reportingPeriodId
                  - version
                  - fiscalYear
                  - status
                  - reportData
                  - metadata
                  - computedTotals
                  - validationResults
                  - createdBy
                  - createdAt
                  - updatedBy
                  - updatedAt
                  - submittedBy
                  - submittedAt
                  - approvedBy
                  - approvedAt
        "404":
          description: Financial report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/financial-reports/{id}/versions:
    get:
      tags:
        - financial-reports
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: Report versions retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    reportCode:
                      type: string
                    title:
                      type: string
                    projectId:
                      type: integer
                    facilityId:
                      type: integer
                    reportingPeriodId:
                      type: integer
                    version:
                      type: string
                    fiscalYear:
                      type: string
                    status:
                      type: string
                      enum:
                        - draft
                        - submitted
                        - approved
                        - rejected
                    reportData:
                      type: object
                      additionalProperties:
                        nullable: true
                    metadata:
                      type: object
                      nullable: true
                      additionalProperties:
                        nullable: true
                    computedTotals:
                      type: object
                      nullable: true
                      additionalProperties:
                        nullable: true
                    validationResults:
                      type: object
                      nullable: true
                      additionalProperties:
                        nullable: true
                    createdBy:
                      type: integer
                      nullable: true
                    createdAt:
                      type: string
                    updatedBy:
                      type: integer
                      nullable: true
                    updatedAt:
                      type: string
                    submittedBy:
                      type: integer
                      nullable: true
                    submittedAt:
                      type: string
                      nullable: true
                    approvedBy:
                      type: integer
                      nullable: true
                    approvedAt:
                      type: string
                      nullable: true
                  required:
                    - id
                    - reportCode
                    - title
                    - projectId
                    - facilityId
                    - reportingPeriodId
                    - version
                    - fiscalYear
                    - status
                    - reportData
                    - metadata
                    - computedTotals
                    - validationResults
                    - createdBy
                    - createdAt
                    - updatedBy
                    - updatedAt
                    - submittedBy
                    - submittedAt
                    - approvedBy
                    - approvedAt
        "404":
          description: Financial report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  
  /api/form-fields:
    get:
      tags:
        - form-fields
      parameters:
        - schema:
            type: string
          required: false
          name: schemaId
          in: query
        - schema:
            type: string
          required: false
          name: categoryId
          in: query
        - schema:
            type: string
          required: false
          name: parentFieldId
          in: query
        - schema:
            type: string
            enum:
              - text
              - number
              - currency
              - percentage
              - date
              - select
              - multiselect
              - checkbox
              - textarea
              - calculated
              - readonly
          required: false
          name: fieldType
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
          required: false
          name: isVisible
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
          required: false
          name: isEditable
          in: query
        - schema:
            type: string
          required: false
          name: page
          in: query
        - schema:
            type: string
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: List of form fields with pagination
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        schemaId:
                          type: integer
                        fieldKey:
                          type: string
                        label:
                          type: string
                        fieldType:
                          type: string
                          enum:
                            - text
                            - number
                            - currency
                            - percentage
                            - date
                            - select
                            - multiselect
                            - checkbox
                            - textarea
                            - calculated
                            - readonly
                        isRequired:
                          type: boolean
                        displayOrder:
                          type: integer
                        parentFieldId:
                          type: integer
                          nullable: true
                        categoryId:
                          type: integer
                          nullable: true
                        fieldConfig:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        computationFormula:
                          type: string
                          nullable: true
                        defaultValue:
                          nullable: true
                        helpText:
                          type: string
                          nullable: true
                        isVisible:
                          type: boolean
                        isEditable:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - schemaId
                        - fieldKey
                        - label
                        - fieldType
                        - isRequired
                        - displayOrder
                        - parentFieldId
                        - categoryId
                        - fieldConfig
                        - validationRules
                        - computationFormula
                        - helpText
                        - isVisible
                        - isEditable
                        - createdAt
                        - updatedAt
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      pages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - pages
                required:
                  - data
                  - pagination
    post:
      tags:
        - form-fields
      requestBody:
        description: The form field to create
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schemaId:
                  type: integer
                fieldKey:
                  type: string
                  minLength: 1
                  maxLength: 100
                label:
                  type: string
                  minLength: 1
                  maxLength: 200
                fieldType:
                  type: string
                  enum:
                    - text
                    - number
                    - currency
                    - percentage
                    - date
                    - select
                    - multiselect
                    - checkbox
                    - textarea
                    - calculated
                    - readonly
                isRequired:
                  type: boolean
                  default: false
                displayOrder:
                  type: integer
                parentFieldId:
                  type: integer
                categoryId:
                  type: integer
                fieldConfig:
                  type: object
                  additionalProperties:
                    nullable: true
                validationRules:
                  type: object
                  additionalProperties:
                    nullable: true
                computationFormula:
                  type: string
                defaultValue:
                  nullable: true
                helpText:
                  type: string
                isVisible:
                  type: boolean
                  default: true
                isEditable:
                  type: boolean
                  default: true
              required:
                - schemaId
                - fieldKey
                - label
                - fieldType
                - displayOrder
      responses:
        "201":
          description: The created form field
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  schemaId:
                    type: integer
                  fieldKey:
                    type: string
                  label:
                    type: string
                  fieldType:
                    type: string
                    enum:
                      - text
                      - number
                      - currency
                      - percentage
                      - date
                      - select
                      - multiselect
                      - checkbox
                      - textarea
                      - calculated
                      - readonly
                  isRequired:
                    type: boolean
                  displayOrder:
                    type: integer
                  parentFieldId:
                    type: integer
                    nullable: true
                  categoryId:
                    type: integer
                    nullable: true
                  fieldConfig:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationRules:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computationFormula:
                    type: string
                    nullable: true
                  defaultValue:
                    nullable: true
                  helpText:
                    type: string
                    nullable: true
                  isVisible:
                    type: boolean
                  isEditable:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - schemaId
                  - fieldKey
                  - label
                  - fieldType
                  - isRequired
                  - displayOrder
                  - parentFieldId
                  - categoryId
                  - fieldConfig
                  - validationRules
                  - computationFormula
                  - helpText
                  - isVisible
                  - isEditable
                  - createdAt
                  - updatedAt
        "400":
          description: Invalid field data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/form-fields/bulk:
    post:
      tags:
        - form-fields
      requestBody:
        description: Form fields to create in bulk
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                fields:
                  type: array
                  items:
                    type: object
                    properties:
                      schemaId:
                        type: integer
                      fieldKey:
                        type: string
                        minLength: 1
                        maxLength: 100
                      label:
                        type: string
                        minLength: 1
                        maxLength: 200
                      fieldType:
                        type: string
                        enum:
                          - text
                          - number
                          - currency
                          - percentage
                          - date
                          - select
                          - multiselect
                          - checkbox
                          - textarea
                          - calculated
                          - readonly
                      isRequired:
                        type: boolean
                        default: false
                      displayOrder:
                        type: integer
                      parentFieldId:
                        type: integer
                      categoryId:
                        type: integer
                      fieldConfig:
                        type: object
                        additionalProperties:
                          nullable: true
                      validationRules:
                        type: object
                        additionalProperties:
                          nullable: true
                      computationFormula:
                        type: string
                      defaultValue:
                        nullable: true
                      helpText:
                        type: string
                      isVisible:
                        type: boolean
                        default: true
                      isEditable:
                        type: boolean
                        default: true
                    required:
                      - schemaId
                      - fieldKey
                      - label
                      - fieldType
                      - displayOrder
              required:
                - fields
      responses:
        "201":
          description: Bulk create results
          content:
            application/json:
              schema:
                type: object
                properties:
                  created:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        schemaId:
                          type: integer
                        fieldKey:
                          type: string
                        label:
                          type: string
                        fieldType:
                          type: string
                          enum:
                            - text
                            - number
                            - currency
                            - percentage
                            - date
                            - select
                            - multiselect
                            - checkbox
                            - textarea
                            - calculated
                            - readonly
                        isRequired:
                          type: boolean
                        displayOrder:
                          type: integer
                        parentFieldId:
                          type: integer
                          nullable: true
                        categoryId:
                          type: integer
                          nullable: true
                        fieldConfig:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        computationFormula:
                          type: string
                          nullable: true
                        defaultValue:
                          nullable: true
                        helpText:
                          type: string
                          nullable: true
                        isVisible:
                          type: boolean
                        isEditable:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - schemaId
                        - fieldKey
                        - label
                        - fieldType
                        - isRequired
                        - displayOrder
                        - parentFieldId
                        - categoryId
                        - fieldConfig
                        - validationRules
                        - computationFormula
                        - helpText
                        - isVisible
                        - isEditable
                        - createdAt
                        - updatedAt
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        index:
                          type: number
                        error:
                          type: string
                      required:
                        - index
                        - error
                required:
                  - created
                  - errors
        "400":
          description: Invalid bulk data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
    patch:
      tags:
        - form-fields
      requestBody:
        description: Form fields to update in bulk
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                fields:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      data:
                        type: object
                        properties:
                          schemaId:
                            type: integer
                          fieldKey:
                            type: string
                            minLength: 1
                            maxLength: 100
                          label:
                            type: string
                            minLength: 1
                            maxLength: 200
                          fieldType:
                            type: string
                            enum:
                              - text
                              - number
                              - currency
                              - percentage
                              - date
                              - select
                              - multiselect
                              - checkbox
                              - textarea
                              - calculated
                              - readonly
                          isRequired:
                            type: boolean
                            default: false
                          displayOrder:
                            type: integer
                          parentFieldId:
                            type: integer
                          categoryId:
                            type: integer
                          fieldConfig:
                            type: object
                            additionalProperties:
                              nullable: true
                          validationRules:
                            type: object
                            additionalProperties:
                              nullable: true
                          computationFormula:
                            type: string
                          defaultValue:
                            nullable: true
                          helpText:
                            type: string
                          isVisible:
                            type: boolean
                            default: true
                          isEditable:
                            type: boolean
                            default: true
                    required:
                      - id
                      - data
              required:
                - fields
      responses:
        "200":
          description: Bulk update results
          content:
            application/json:
              schema:
                type: object
                properties:
                  updated:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        schemaId:
                          type: integer
                        fieldKey:
                          type: string
                        label:
                          type: string
                        fieldType:
                          type: string
                          enum:
                            - text
                            - number
                            - currency
                            - percentage
                            - date
                            - select
                            - multiselect
                            - checkbox
                            - textarea
                            - calculated
                            - readonly
                        isRequired:
                          type: boolean
                        displayOrder:
                          type: integer
                        parentFieldId:
                          type: integer
                          nullable: true
                        categoryId:
                          type: integer
                          nullable: true
                        fieldConfig:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        computationFormula:
                          type: string
                          nullable: true
                        defaultValue:
                          nullable: true
                        helpText:
                          type: string
                          nullable: true
                        isVisible:
                          type: boolean
                        isEditable:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - schemaId
                        - fieldKey
                        - label
                        - fieldType
                        - isRequired
                        - displayOrder
                        - parentFieldId
                        - categoryId
                        - fieldConfig
                        - validationRules
                        - computationFormula
                        - helpText
                        - isVisible
                        - isEditable
                        - createdAt
                        - updatedAt
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        error:
                          type: string
                      required:
                        - id
                        - error
                required:
                  - updated
                  - errors
        "400":
          description: Invalid bulk data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/form-fields/{id}:
    get:
      tags:
        - form-fields
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The form field
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  schemaId:
                    type: integer
                  fieldKey:
                    type: string
                  label:
                    type: string
                  fieldType:
                    type: string
                    enum:
                      - text
                      - number
                      - currency
                      - percentage
                      - date
                      - select
                      - multiselect
                      - checkbox
                      - textarea
                      - calculated
                      - readonly
                  isRequired:
                    type: boolean
                  displayOrder:
                    type: integer
                  parentFieldId:
                    type: integer
                    nullable: true
                  categoryId:
                    type: integer
                    nullable: true
                  fieldConfig:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationRules:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computationFormula:
                    type: string
                    nullable: true
                  defaultValue:
                    nullable: true
                  helpText:
                    type: string
                    nullable: true
                  isVisible:
                    type: boolean
                  isEditable:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - schemaId
                  - fieldKey
                  - label
                  - fieldType
                  - isRequired
                  - displayOrder
                  - parentFieldId
                  - categoryId
                  - fieldConfig
                  - validationRules
                  - computationFormula
                  - helpText
                  - isVisible
                  - isEditable
                  - createdAt
                  - updatedAt
        "404":
          description: Form field not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    patch:
      tags:
        - form-fields
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: The field data to update
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schemaId:
                  type: integer
                fieldKey:
                  type: string
                  minLength: 1
                  maxLength: 100
                label:
                  type: string
                  minLength: 1
                  maxLength: 200
                fieldType:
                  type: string
                  enum:
                    - text
                    - number
                    - currency
                    - percentage
                    - date
                    - select
                    - multiselect
                    - checkbox
                    - textarea
                    - calculated
                    - readonly
                isRequired:
                  type: boolean
                  default: false
                displayOrder:
                  type: integer
                parentFieldId:
                  type: integer
                categoryId:
                  type: integer
                fieldConfig:
                  type: object
                  additionalProperties:
                    nullable: true
                validationRules:
                  type: object
                  additionalProperties:
                    nullable: true
                computationFormula:
                  type: string
                defaultValue:
                  nullable: true
                helpText:
                  type: string
                isVisible:
                  type: boolean
                  default: true
                isEditable:
                  type: boolean
                  default: true
      responses:
        "200":
          description: The updated form field
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  schemaId:
                    type: integer
                  fieldKey:
                    type: string
                  label:
                    type: string
                  fieldType:
                    type: string
                    enum:
                      - text
                      - number
                      - currency
                      - percentage
                      - date
                      - select
                      - multiselect
                      - checkbox
                      - textarea
                      - calculated
                      - readonly
                  isRequired:
                    type: boolean
                  displayOrder:
                    type: integer
                  parentFieldId:
                    type: integer
                    nullable: true
                  categoryId:
                    type: integer
                    nullable: true
                  fieldConfig:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  validationRules:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  computationFormula:
                    type: string
                    nullable: true
                  defaultValue:
                    nullable: true
                  helpText:
                    type: string
                    nullable: true
                  isVisible:
                    type: boolean
                  isEditable:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - schemaId
                  - fieldKey
                  - label
                  - fieldType
                  - isRequired
                  - displayOrder
                  - parentFieldId
                  - categoryId
                  - fieldConfig
                  - validationRules
                  - computationFormula
                  - helpText
                  - isVisible
                  - isEditable
                  - createdAt
                  - updatedAt
        "400":
          description: Invalid field data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
        "404":
          description: Form field not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - form-fields
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: The form field was deleted
        "404":
          description: Form field not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/form-fields/reorder:
    patch:
      tags:
        - form-fields
      requestBody:
        description: Field order updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                fieldOrders:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      displayOrder:
                        type: integer
                    required:
                      - id
                      - displayOrder
              required:
                - fieldOrders
      responses:
        "200":
          description: Reordered form fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  updated:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        schemaId:
                          type: integer
                        fieldKey:
                          type: string
                        label:
                          type: string
                        fieldType:
                          type: string
                          enum:
                            - text
                            - number
                            - currency
                            - percentage
                            - date
                            - select
                            - multiselect
                            - checkbox
                            - textarea
                            - calculated
                            - readonly
                        isRequired:
                          type: boolean
                        displayOrder:
                          type: integer
                        parentFieldId:
                          type: integer
                          nullable: true
                        categoryId:
                          type: integer
                          nullable: true
                        fieldConfig:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        validationRules:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        computationFormula:
                          type: string
                          nullable: true
                        defaultValue:
                          nullable: true
                        helpText:
                          type: string
                          nullable: true
                        isVisible:
                          type: boolean
                        isEditable:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - schemaId
                        - fieldKey
                        - label
                        - fieldType
                        - isRequired
                        - displayOrder
                        - parentFieldId
                        - categoryId
                        - fieldConfig
                        - validationRules
                        - computationFormula
                        - helpText
                        - isVisible
                        - isEditable
                        - createdAt
                        - updatedAt
                  message:
                    type: string
                required:
                  - updated
                  - message
        "400":
          description: Invalid reorder data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/form-fields/schema/{schemaId}:
    get:
      tags:
        - form-fields
      parameters:
        - schema:
            type: string
            pattern: ^\d+$
          required: true
          name: schemaId
          in: path
        - schema:
            type: string
            enum:
              - "true"
              - "false"
            default: "false"
          required: false
          name: includeHidden
          in: query
        - schema:
            type: string
          required: false
          name: categoryId
          in: query
      responses:
        "200":
          description: Form fields for the schema
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    schemaId:
                      type: integer
                    fieldKey:
                      type: string
                    label:
                      type: string
                    fieldType:
                      type: string
                      enum:
                        - text
                        - number
                        - currency
                        - percentage
                        - date
                        - select
                        - multiselect
                        - checkbox
                        - textarea
                        - calculated
                        - readonly
                    isRequired:
                      type: boolean
                    displayOrder:
                      type: integer
                    parentFieldId:
                      type: integer
                      nullable: true
                    categoryId:
                      type: integer
                      nullable: true
                    fieldConfig:
                      type: object
                      nullable: true
                      additionalProperties:
                        nullable: true
                    validationRules:
                      type: object
                      nullable: true
                      additionalProperties:
                        nullable: true
                    computationFormula:
                      type: string
                      nullable: true
                    defaultValue:
                      nullable: true
                    helpText:
                      type: string
                      nullable: true
                    isVisible:
                      type: boolean
                    isEditable:
                      type: boolean
                    createdAt:
                      type: string
                    updatedAt:
                      type: string
                  required:
                    - id
                    - schemaId
                    - fieldKey
                    - label
                    - fieldType
                    - isRequired
                    - displayOrder
                    - parentFieldId
                    - categoryId
                    - fieldConfig
                    - validationRules
                    - computationFormula
                    - helpText
                    - isVisible
                    - isEditable
                    - createdAt
                    - updatedAt
  
  /api/projects:
    get:
      tags:
        - projects
      parameters:
        - schema:
            type: string
            enum:
              - HIV
              - Malaria
              - TB
          required: false
          name: projectType
          in: query
        - schema:
            type: integer
          required: false
          name: facilityId
          in: query
        - schema:
            type: string
          required: false
          name: status
          in: query
        - schema:
            type: integer
          required: false
          name: userId
          in: query
      responses:
        "200":
          description: The list of projects
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    status:
                      type: string
                    code:
                      type: string
                    description:
                      type: string
                    projectType:
                      type: string
                      enum:
                        - HIV
                        - Malaria
                        - TB
                    facilityId:
                      type: integer
                    facility:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
                        facilityType:
                          type: string
                          enum:
                            - hospital
                            - health_center
                        districtId:
                          type: integer
                      required:
                        - id
                        - name
                        - facilityType
                        - districtId
                    reportingPeriodId:
                      type: integer
                    reportingPeriod:
                      type: object
                      properties:
                        id:
                          type: integer
                        year:
                          type: integer
                        periodType:
                          type: string
                        startDate:
                          type: string
                        endDate:
                          type: string
                        status:
                          type: string
                      required:
                        - id
                        - year
                        - periodType
                        - startDate
                        - endDate
                        - status
                    userId:
                      type: integer
                    user:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
                        email:
                          type: string
                        role:
                          type: string
                          enum:
                            - accountant
                            - admin
                            - program_manager
                      required:
                        - id
                        - name
                        - email
                        - role
                    metadata:
                      type: object
                      additionalProperties:
                        nullable: true
                    createdAt:
                      type: string
                    updatedAt:
                      type: string
                  required:
                    - id
                    - name
                    - status
                    - code
                    - projectType
                    - facilityId
                    - facility
                    - userId
                    - user
                    - createdAt
                    - updatedAt
    post:
      tags:
        - projects
      requestBody:
        description: The project to create
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  maxLength: 200
                status:
                  type: string
                  maxLength: 20
                  default: ACTIVE
                code:
                  type: string
                  maxLength: 10
                description:
                  type: string
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                userId:
                  type: integer
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - name
                - code
                - projectType
                - facilityId
                - userId
      responses:
        "201":
          description: The created project
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  status:
                    type: string
                  code:
                    type: string
                  description:
                    type: string
                  projectType:
                    type: string
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityId:
                    type: integer
                  facility:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      facilityType:
                        type: string
                        enum:
                          - hospital
                          - health_center
                      districtId:
                        type: integer
                    required:
                      - id
                      - name
                      - facilityType
                      - districtId
                  reportingPeriodId:
                    type: integer
                  reportingPeriod:
                    type: object
                    properties:
                      id:
                        type: integer
                      year:
                        type: integer
                      periodType:
                        type: string
                      startDate:
                        type: string
                      endDate:
                        type: string
                      status:
                        type: string
                    required:
                      - id
                      - year
                      - periodType
                      - startDate
                      - endDate
                      - status
                  userId:
                    type: integer
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                    required:
                      - id
                      - name
                      - email
                      - role
                  metadata:
                    type: object
                    additionalProperties:
                      nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - name
                  - status
                  - code
                  - projectType
                  - facilityId
                  - facility
                  - userId
                  - user
                  - createdAt
                  - updatedAt
        "400":
          description: Invalid project data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "409":
          description: Project with this name or code already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/projects/{id}:
    get:
      tags:
        - projects
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The project
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  status:
                    type: string
                  code:
                    type: string
                  description:
                    type: string
                  projectType:
                    type: string
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityId:
                    type: integer
                  facility:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      facilityType:
                        type: string
                        enum:
                          - hospital
                          - health_center
                      districtId:
                        type: integer
                    required:
                      - id
                      - name
                      - facilityType
                      - districtId
                  reportingPeriodId:
                    type: integer
                  reportingPeriod:
                    type: object
                    properties:
                      id:
                        type: integer
                      year:
                        type: integer
                      periodType:
                        type: string
                      startDate:
                        type: string
                      endDate:
                        type: string
                      status:
                        type: string
                    required:
                      - id
                      - year
                      - periodType
                      - startDate
                      - endDate
                      - status
                  userId:
                    type: integer
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                    required:
                      - id
                      - name
                      - email
                      - role
                  metadata:
                    type: object
                    additionalProperties:
                      nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - name
                  - status
                  - code
                  - projectType
                  - facilityId
                  - facility
                  - userId
                  - user
                  - createdAt
                  - updatedAt
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    put:
      tags:
        - projects
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: The project updates
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  maxLength: 200
                status:
                  type: string
                  maxLength: 20
                  default: ACTIVE
                code:
                  type: string
                  maxLength: 10
                description:
                  type: string
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                userId:
                  type: integer
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - name
                - code
                - projectType
                - facilityId
                - userId
      responses:
        "200":
          description: The updated project
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  status:
                    type: string
                  code:
                    type: string
                  description:
                    type: string
                  projectType:
                    type: string
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityId:
                    type: integer
                  facility:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      facilityType:
                        type: string
                        enum:
                          - hospital
                          - health_center
                      districtId:
                        type: integer
                    required:
                      - id
                      - name
                      - facilityType
                      - districtId
                  reportingPeriodId:
                    type: integer
                  reportingPeriod:
                    type: object
                    properties:
                      id:
                        type: integer
                      year:
                        type: integer
                      periodType:
                        type: string
                      startDate:
                        type: string
                      endDate:
                        type: string
                      status:
                        type: string
                    required:
                      - id
                      - year
                      - periodType
                      - startDate
                      - endDate
                      - status
                  userId:
                    type: integer
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                    required:
                      - id
                      - name
                      - email
                      - role
                  metadata:
                    type: object
                    additionalProperties:
                      nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - name
                  - status
                  - code
                  - projectType
                  - facilityId
                  - facility
                  - userId
                  - user
                  - createdAt
                  - updatedAt
        "400":
          description: Invalid project data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    patch:
      tags:
        - projects
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: The project partial updates
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  maxLength: 200
                status:
                  type: string
                  maxLength: 20
                  default: ACTIVE
                code:
                  type: string
                  maxLength: 10
                description:
                  type: string
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityId:
                  type: integer
                reportingPeriodId:
                  type: integer
                userId:
                  type: integer
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
      responses:
        "200":
          description: The updated project
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  status:
                    type: string
                  code:
                    type: string
                  description:
                    type: string
                  projectType:
                    type: string
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityId:
                    type: integer
                  facility:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      facilityType:
                        type: string
                        enum:
                          - hospital
                          - health_center
                      districtId:
                        type: integer
                    required:
                      - id
                      - name
                      - facilityType
                      - districtId
                  reportingPeriodId:
                    type: integer
                  reportingPeriod:
                    type: object
                    properties:
                      id:
                        type: integer
                      year:
                        type: integer
                      periodType:
                        type: string
                      startDate:
                        type: string
                      endDate:
                        type: string
                      status:
                        type: string
                    required:
                      - id
                      - year
                      - periodType
                      - startDate
                      - endDate
                      - status
                  userId:
                    type: integer
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                        enum:
                          - accountant
                          - admin
                          - program_manager
                    required:
                      - id
                      - name
                      - email
                      - role
                  metadata:
                    type: object
                    additionalProperties:
                      nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - name
                  - status
                  - code
                  - projectType
                  - facilityId
                  - facility
                  - userId
                  - user
                  - createdAt
                  - updatedAt
        "400":
          description: Invalid project data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - projects
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: Project deleted successfully
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "409":
          description: Cannot delete project with existing data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  
  /api/schemas:
    get:
      tags:
        - schemas
      parameters:
        - schema:
            type: string
            enum:
              - planning
              - execution
              - reporting
          required: false
          name: moduleType
          in: query
        - schema:
            type: string
            enum:
              - HIV
              - Malaria
              - TB
          required: false
          name: projectType
          in: query
        - schema:
            type: string
            enum:
              - hospital
              - health_center
          required: false
          name: facilityType
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
          required: false
          name: isActive
          in: query
        - schema:
            type: string
          required: false
          name: page
          in: query
        - schema:
            type: string
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: List of form schemas with pagination
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
                        version:
                          type: string
                        projectType:
                          type: string
                          nullable: true
                          enum:
                            - HIV
                            - Malaria
                            - TB
                        facilityType:
                          type: string
                          nullable: true
                          enum:
                            - hospital
                            - health_center
                        moduleType:
                          type: string
                          enum:
                            - planning
                            - execution
                            - reporting
                        isActive:
                          type: boolean
                        schema:
                          type: object
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        createdBy:
                          type: integer
                          nullable: true
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - name
                        - version
                        - projectType
                        - facilityType
                        - moduleType
                        - isActive
                        - schema
                        - metadata
                        - createdBy
                        - createdAt
                        - updatedAt
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      pages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - pages
                required:
                  - data
                  - pagination
    post:
      tags:
        - schemas
      requestBody:
        description: The form schema to create
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                version:
                  type: string
                  minLength: 1
                  maxLength: 20
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityType:
                  type: string
                  enum:
                    - hospital
                    - health_center
                moduleType:
                  type: string
                  enum:
                    - planning
                    - execution
                    - reporting
                schema:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                isActive:
                  type: boolean
                  default: true
              required:
                - name
                - version
                - moduleType
                - schema
      responses:
        "201":
          description: The created form schema
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  version:
                    type: string
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  moduleType:
                    type: string
                    enum:
                      - planning
                      - execution
                      - reporting
                  isActive:
                    type: boolean
                  schema:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - name
                  - version
                  - projectType
                  - facilityType
                  - moduleType
                  - isActive
                  - schema
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedAt
        "400":
          description: Invalid schema data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/schemas/{id}:
    get:
      tags:
        - schemas
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The form schema
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  version:
                    type: string
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  moduleType:
                    type: string
                    enum:
                      - planning
                      - execution
                      - reporting
                  isActive:
                    type: boolean
                  schema:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - name
                  - version
                  - projectType
                  - facilityType
                  - moduleType
                  - isActive
                  - schema
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedAt
        "404":
          description: Schema not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    patch:
      tags:
        - schemas
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: The schema data to update
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                version:
                  type: string
                  minLength: 1
                  maxLength: 20
                projectType:
                  type: string
                  enum:
                    - HIV
                    - Malaria
                    - TB
                facilityType:
                  type: string
                  enum:
                    - hospital
                    - health_center
                moduleType:
                  type: string
                  enum:
                    - planning
                    - execution
                    - reporting
                schema:
                  type: object
                  additionalProperties:
                    nullable: true
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                isActive:
                  type: boolean
                  default: true
      responses:
        "200":
          description: The updated form schema
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  version:
                    type: string
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  moduleType:
                    type: string
                    enum:
                      - planning
                      - execution
                      - reporting
                  isActive:
                    type: boolean
                  schema:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - name
                  - version
                  - projectType
                  - facilityType
                  - moduleType
                  - isActive
                  - schema
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedAt
        "400":
          description: Invalid schema data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
        "404":
          description: Schema not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - schemas
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: The schema was deleted
        "404":
          description: Schema not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/schemas/{id}/activate:
    patch:
      tags:
        - schemas
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The activated schema
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  version:
                    type: string
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  moduleType:
                    type: string
                    enum:
                      - planning
                      - execution
                      - reporting
                  isActive:
                    type: boolean
                  schema:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - name
                  - version
                  - projectType
                  - facilityType
                  - moduleType
                  - isActive
                  - schema
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedAt
        "404":
          description: Schema not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/schemas/{id}/deactivate:
    patch:
      tags:
        - schemas
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "200":
          description: The deactivated schema
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  version:
                    type: string
                  projectType:
                    type: string
                    nullable: true
                    enum:
                      - HIV
                      - Malaria
                      - TB
                  facilityType:
                    type: string
                    nullable: true
                    enum:
                      - hospital
                      - health_center
                  moduleType:
                    type: string
                    enum:
                      - planning
                      - execution
                      - reporting
                  isActive:
                    type: boolean
                  schema:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    nullable: true
                    additionalProperties:
                      nullable: true
                  createdBy:
                    type: integer
                    nullable: true
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - name
                  - version
                  - projectType
                  - facilityType
                  - moduleType
                  - isActive
                  - schema
                  - metadata
                  - createdBy
                  - createdAt
                  - updatedAt
        "404":
          description: Schema not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  
  /api/statements/{id}/submit:
    post:
      tags:
        - statements
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Submission details
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                comments:
                  type: string
                attachments:
                  type: array
                  items:
                    type: string
                notifyUsers:
                  type: array
                  items:
                    type: integer
                scheduledDate:
                  type: string
      responses:
        "200":
          description: Report submitted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportId:
                    type: integer
                  action:
                    type: string
                    enum:
                      - submit
                      - approve
                      - reject
                      - request_changes
                      - recall
                  previousStatus:
                    type: string
                  newStatus:
                    type: string
                  actionBy:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                    required:
                      - id
                      - name
                      - email
                      - role
                  actionAt:
                    type: string
                  comments:
                    type: string
                    nullable: true
                  validationResults:
                    type: object
                    properties:
                      isValid:
                        type: boolean
                      errors:
                        type: array
                        items:
                          type: string
                      warnings:
                        type: array
                        items:
                          type: string
                    required:
                      - isValid
                      - errors
                      - warnings
                required:
                  - reportId
                  - action
                  - previousStatus
                  - newStatus
                  - actionBy
                  - actionAt
                  - comments
        "400":
          description: Invalid submission request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  validationErrors:
                    type: array
                    items:
                      type: string
                required:
                  - message
        "404":
          description: Report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/statements/{id}/approve:
    post:
      tags:
        - statements
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Approval details
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                comments:
                  type: string
                attachments:
                  type: array
                  items:
                    type: string
                notifyUsers:
                  type: array
                  items:
                    type: integer
                scheduledDate:
                  type: string
      responses:
        "200":
          description: Report approved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportId:
                    type: integer
                  action:
                    type: string
                    enum:
                      - submit
                      - approve
                      - reject
                      - request_changes
                      - recall
                  previousStatus:
                    type: string
                  newStatus:
                    type: string
                  actionBy:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                    required:
                      - id
                      - name
                      - email
                      - role
                  actionAt:
                    type: string
                  comments:
                    type: string
                    nullable: true
                  validationResults:
                    type: object
                    properties:
                      isValid:
                        type: boolean
                      errors:
                        type: array
                        items:
                          type: string
                      warnings:
                        type: array
                        items:
                          type: string
                    required:
                      - isValid
                      - errors
                      - warnings
                required:
                  - reportId
                  - action
                  - previousStatus
                  - newStatus
                  - actionBy
                  - actionAt
                  - comments
        "403":
          description: Insufficient permissions to approve report
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: Report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/statements/{id}/reject:
    post:
      tags:
        - statements
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Rejection details
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                comments:
                  type: string
                attachments:
                  type: array
                  items:
                    type: string
                notifyUsers:
                  type: array
                  items:
                    type: integer
                scheduledDate:
                  type: string
      responses:
        "200":
          description: Report rejected successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportId:
                    type: integer
                  action:
                    type: string
                    enum:
                      - submit
                      - approve
                      - reject
                      - request_changes
                      - recall
                  previousStatus:
                    type: string
                  newStatus:
                    type: string
                  actionBy:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                    required:
                      - id
                      - name
                      - email
                      - role
                  actionAt:
                    type: string
                  comments:
                    type: string
                    nullable: true
                  validationResults:
                    type: object
                    properties:
                      isValid:
                        type: boolean
                      errors:
                        type: array
                        items:
                          type: string
                      warnings:
                        type: array
                        items:
                          type: string
                    required:
                      - isValid
                      - errors
                      - warnings
                required:
                  - reportId
                  - action
                  - previousStatus
                  - newStatus
                  - actionBy
                  - actionAt
                  - comments
        "404":
          description: Report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/statements/{id}/request-changes:
    post:
      tags:
        - statements
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Change request details
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                comments:
                  type: string
                attachments:
                  type: array
                  items:
                    type: string
                notifyUsers:
                  type: array
                  items:
                    type: integer
                scheduledDate:
                  type: string
      responses:
        "200":
          description: Changes requested successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportId:
                    type: integer
                  action:
                    type: string
                    enum:
                      - submit
                      - approve
                      - reject
                      - request_changes
                      - recall
                  previousStatus:
                    type: string
                  newStatus:
                    type: string
                  actionBy:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                    required:
                      - id
                      - name
                      - email
                      - role
                  actionAt:
                    type: string
                  comments:
                    type: string
                    nullable: true
                  validationResults:
                    type: object
                    properties:
                      isValid:
                        type: boolean
                      errors:
                        type: array
                        items:
                          type: string
                      warnings:
                        type: array
                        items:
                          type: string
                    required:
                      - isValid
                      - errors
                      - warnings
                required:
                  - reportId
                  - action
                  - previousStatus
                  - newStatus
                  - actionBy
                  - actionAt
                  - comments
        "404":
          description: Report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/statements/{id}/recall:
    post:
      tags:
        - statements
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Recall details
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                comments:
                  type: string
                attachments:
                  type: array
                  items:
                    type: string
                notifyUsers:
                  type: array
                  items:
                    type: integer
                scheduledDate:
                  type: string
      responses:
        "200":
          description: Report recalled successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportId:
                    type: integer
                  action:
                    type: string
                    enum:
                      - submit
                      - approve
                      - reject
                      - request_changes
                      - recall
                  previousStatus:
                    type: string
                  newStatus:
                    type: string
                  actionBy:
                    type: object
                    properties:
                      id:
                        type: number
                      name:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                    required:
                      - id
                      - name
                      - email
                      - role
                  actionAt:
                    type: string
                  comments:
                    type: string
                    nullable: true
                  validationResults:
                    type: object
                    properties:
                      isValid:
                        type: boolean
                      errors:
                        type: array
                        items:
                          type: string
                      warnings:
                        type: array
                        items:
                          type: string
                    required:
                      - isValid
                      - errors
                      - warnings
                required:
                  - reportId
                  - action
                  - previousStatus
                  - newStatus
                  - actionBy
                  - actionAt
                  - comments
        "403":
          description: Cannot recall report in current state
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: Report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/statements/{id}/workflow-history:
    get:
      tags:
        - statements
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
        - schema:
            type: integer
            default: 1
          required: false
          name: page
          in: query
        - schema:
            type: integer
            default: 20
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: Workflow history retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  history:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        reportId:
                          type: integer
                        action:
                          type: string
                          enum:
                            - submit
                            - approve
                            - reject
                            - request_changes
                            - recall
                        fromStatus:
                          type: string
                        toStatus:
                          type: string
                        actionBy:
                          type: integer
                        actionByUser:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            email:
                              type: string
                            role:
                              type: string
                          required:
                            - id
                            - name
                            - email
                            - role
                        comments:
                          type: string
                          nullable: true
                        attachments:
                          type: array
                          nullable: true
                          items:
                            type: string
                        metadata:
                          type: object
                          nullable: true
                          additionalProperties:
                            nullable: true
                        actionAt:
                          type: string
                      required:
                        - id
                        - reportId
                        - action
                        - fromStatus
                        - toStatus
                        - actionBy
                        - actionByUser
                        - comments
                        - attachments
                        - metadata
                        - actionAt
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                required:
                  - history
                  - pagination
        "404":
          description: Report not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/statements/bulk-approval:
    post:
      tags:
        - statements
      requestBody:
        description: Bulk approval request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reportIds:
                  type: array
                  items:
                    type: integer
                action:
                  type: string
                  enum:
                    - submit
                    - approve
                    - reject
                    - request_changes
                    - recall
                comments:
                  type: string
                skipValidation:
                  type: boolean
                  default: false
              required:
                - reportIds
                - action
      responses:
        "200":
          description: Bulk approval completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  successful:
                    type: array
                    items:
                      type: object
                      properties:
                        reportId:
                          type: number
                        action:
                          type: string
                          enum:
                            - submit
                            - approve
                            - reject
                            - request_changes
                            - recall
                        newStatus:
                          type: string
                      required:
                        - reportId
                        - action
                        - newStatus
                  failed:
                    type: array
                    items:
                      type: object
                      properties:
                        reportId:
                          type: number
                        error:
                          type: string
                        validationErrors:
                          type: array
                          items:
                            type: string
                      required:
                        - reportId
                        - error
                  summary:
                    type: object
                    properties:
                      totalProcessed:
                        type: number
                      successCount:
                        type: number
                      failureCount:
                        type: number
                    required:
                      - totalProcessed
                      - successCount
                      - failureCount
                required:
                  - successful
                  - failed
                  - summary
        "400":
          description: Invalid bulk approval request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /api/statements/approval-queue:
    get:
      tags:
        - statements
      parameters:
        - schema:
            type: integer
          required: false
          name: userId
          in: query
        - schema:
            type: integer
          required: false
          name: facilityId
          in: query
        - schema:
            type: string
          required: false
          name: projectType
          in: query
        - schema:
            type: string
            enum:
              - high
              - medium
              - low
          required: false
          name: priority
          in: query
        - schema:
            type: string
          required: false
          name: dueBefore
          in: query
        - schema:
            type: array
            items:
              type: string
              enum:
                - draft
                - submitted
                - under_review
                - approved
                - rejected
                - changes_requested
          required: false
          name: status
          in: query
        - schema:
            type: integer
            default: 1
          required: false
          name: page
          in: query
        - schema:
            type: integer
            default: 20
          required: false
          name: limit
          in: query
      responses:
        "200":
          description: Approval queue retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  queue:
                    type: array
                    items:
                      type: object
                      properties:
                        reportId:
                          type: integer
                        report:
                          type: object
                          properties:
                            title:
                              type: string
                            reportCode:
                              type: string
                            fiscalYear:
                              type: string
                            status:
                              type: string
                            createdAt:
                              type: string
                            submittedAt:
                              type: string
                              nullable: true
                          required:
                            - title
                            - reportCode
                            - fiscalYear
                            - status
                            - createdAt
                            - submittedAt
                        facility:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            facilityType:
                              type: string
                          required:
                            - id
                            - name
                            - facilityType
                        project:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            projectType:
                              type: string
                              nullable: true
                          required:
                            - id
                            - name
                            - projectType
                        submitter:
                          type: object
                          nullable: true
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                            email:
                              type: string
                          required:
                            - id
                            - name
                            - email
                        daysInQueue:
                          type: number
                        priority:
                          type: string
                          enum:
                            - high
                            - medium
                            - low
                        validationStatus:
                          type: object
                          properties:
                            isValid:
                              type: boolean
                            errorCount:
                              type: number
                            warningCount:
                              type: number
                          required:
                            - isValid
                            - errorCount
                            - warningCount
                      required:
                        - reportId
                        - report
                        - facility
                        - project
                        - submitter
                        - daysInQueue
                        - priority
                        - validationStatus
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                      limit:
                        type: number
                      total:
                        type: number
                      totalPages:
                        type: number
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                  summary:
                    type: object
                    properties:
                      totalPending:
                        type: number
                      byPriority:
                        type: object
                        additionalProperties:
                          nullable: true
                      averageDaysInQueue:
                        type: number
                      oldestSubmission:
                        type: string
                        nullable: true
                    required:
                      - totalPending
                      - byPriority
                      - averageDaysInQueue
                      - oldestSubmission
                required:
                  - queue
                  - pagination
                  - summary
  /api/statements/notification-preferences:
    get:
      tags:
        - statements
      responses:
        "200":
          description: Notification preferences retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  userId:
                    type: integer
                  emailNotifications:
                    type: boolean
                    default: true
                  reportSubmitted:
                    type: boolean
                    default: true
                  reportApproved:
                    type: boolean
                    default: true
                  reportRejected:
                    type: boolean
                    default: true
                  changesRequested:
                    type: boolean
                    default: true
                  reminderNotifications:
                    type: boolean
                    default: true
                  reminderDays:
                    type: integer
                    default: 7
                required:
                  - userId
    put:
      tags:
        - statements
      requestBody:
        description: Notification preferences
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                emailNotifications:
                  type: boolean
                  default: true
                reportSubmitted:
                  type: boolean
                  default: true
                reportApproved:
                  type: boolean
                  default: true
                reportRejected:
                  type: boolean
                  default: true
                changesRequested:
                  type: boolean
                  default: true
                reminderNotifications:
                  type: boolean
                  default: true
                reminderDays:
                  type: integer
                  default: 7
      responses:
        "200":
          description: Notification preferences updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  userId:
                    type: integer
                  emailNotifications:
                    type: boolean
                    default: true
                  reportSubmitted:
                    type: boolean
                    default: true
                  reportApproved:
                    type: boolean
                    default: true
                  reportRejected:
                    type: boolean
                    default: true
                  changesRequested:
                    type: boolean
                    default: true
                  reminderNotifications:
                    type: boolean
                    default: true
                  reminderDays:
                    type: integer
                    default: 7
                required:
                  - userId
  
  /api/validation/field:
    post:
      tags:
        - validation
      requestBody:
        description: Field validation data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                fieldKey:
                  type: string
                value:
                  nullable: true
                fieldType:
                  type: string
                  enum:
                    - text
                    - number
                    - currency
                    - percentage
                    - date
                    - select
                    - multiselect
                    - checkbox
                    - textarea
                    - calculated
                    - readonly
                validationRules:
                  type: array
                  items:
                    type: object
                    properties:
                      type:
                        type: string
                        enum:
                          - required
                          - min
                          - max
                          - minLength
                          - maxLength
                          - pattern
                          - custom
                      value:
                        nullable: true
                      message:
                        type: string
                      severity:
                        type: string
                        enum:
                          - error
                          - warning
                          - info
                        default: error
                    required:
                      - type
                      - message
                required:
                  type: boolean
                  default: false
              required:
                - fieldKey
                - fieldType
      responses:
        "200":
          description: Field validation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldKey:
                          type: string
                        message:
                          type: string
                        severity:
                          type: string
                          enum:
                            - error
                            - warning
                            - info
                        value:
                          nullable: true
                      required:
                        - fieldKey
                        - message
                        - severity
                  warnings:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldKey:
                          type: string
                        message:
                          type: string
                        value:
                          nullable: true
                      required:
                        - fieldKey
                        - message
                  computedValues:
                    type: object
                    additionalProperties:
                      nullable: true
                required:
                  - isValid
                  - errors
                  - warnings
        "400":
          description: Invalid validation request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/validation/form:
    post:
      tags:
        - validation
      requestBody:
        description: Form validation data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schemaId:
                  type: integer
                formData:
                  type: object
                  additionalProperties:
                    nullable: true
                validateComputed:
                  type: boolean
                  default: true
                strictMode:
                  type: boolean
                  default: false
              required:
                - schemaId
                - formData
      responses:
        "200":
          description: Form validation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldKey:
                          type: string
                        message:
                          type: string
                        severity:
                          type: string
                          enum:
                            - error
                            - warning
                            - info
                        value:
                          nullable: true
                      required:
                        - fieldKey
                        - message
                        - severity
                  warnings:
                    type: array
                    items:
                      type: object
                      properties:
                        fieldKey:
                          type: string
                        message:
                          type: string
                        value:
                          nullable: true
                      required:
                        - fieldKey
                        - message
                  computedValues:
                    type: object
                    additionalProperties:
                      nullable: true
                required:
                  - isValid
                  - errors
                  - warnings
        "400":
          description: Invalid validation request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
        "404":
          description: Schema not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/validation/schema:
    post:
      tags:
        - validation
      requestBody:
        description: Schema definition to validate
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                schema:
                  type: object
                  additionalProperties:
                    nullable: true
                schemaId:
                  type: integer
              required:
                - schema
      responses:
        "200":
          description: Schema validation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        path:
                          type: string
                        message:
                          type: string
                        code:
                          type: string
                      required:
                        - path
                        - message
                        - code
                  warnings:
                    type: array
                    items:
                      type: object
                      properties:
                        path:
                          type: string
                        message:
                          type: string
                        suggestion:
                          type: string
                      required:
                        - path
                        - message
                required:
                  - isValid
                  - errors
                  - warnings
        "400":
          description: Invalid schema definition
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/validation/bulk:
    post:
      tags:
        - validation
      requestBody:
        description: Bulk validation data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                validations:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: string
                      schemaId:
                        type: integer
                      formData:
                        type: object
                        additionalProperties:
                          nullable: true
                    required:
                      - id
                      - schemaId
                      - formData
                stopOnFirstError:
                  type: boolean
                  default: false
              required:
                - validations
      responses:
        "200":
          description: Bulk validation results
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        validation:
                          type: object
                          properties:
                            isValid:
                              type: boolean
                            errors:
                              type: array
                              items:
                                type: object
                                properties:
                                  fieldKey:
                                    type: string
                                  message:
                                    type: string
                                  severity:
                                    type: string
                                    enum:
                                      - error
                                      - warning
                                      - info
                                  value:
                                    nullable: true
                                required:
                                  - fieldKey
                                  - message
                                  - severity
                            warnings:
                              type: array
                              items:
                                type: object
                                properties:
                                  fieldKey:
                                    type: string
                                  message:
                                    type: string
                                  value:
                                    nullable: true
                                required:
                                  - fieldKey
                                  - message
                            computedValues:
                              type: object
                              additionalProperties:
                                nullable: true
                          required:
                            - isValid
                            - errors
                            - warnings
                      required:
                        - id
                        - validation
                  summary:
                    type: object
                    properties:
                      total:
                        type: number
                      valid:
                        type: number
                      invalid:
                        type: number
                      warnings:
                        type: number
                    required:
                      - total
                      - valid
                      - invalid
                      - warnings
                required:
                  - results
                  - summary
        "400":
          description: Invalid bulk validation request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  /api/validation/rules/{schemaId}:
    get:
      tags:
        - validation
      parameters:
        - schema:
            type: string
            pattern: ^\d+$
          required: true
          name: schemaId
          in: path
      responses:
        "200":
          description: Validation rules for schema
          content:
            application/json:
              schema:
                type: object
                properties:
                  schemaId:
                    type: number
                  rules:
                    type: object
                    additionalProperties:
                      nullable: true
                  computedFields:
                    type: array
                    items:
                      type: string
                  requiredFields:
                    type: array
                    items:
                      type: string
                required:
                  - schemaId
                  - rules
                  - computedFields
                  - requiredFields
        "404":
          description: Schema not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
  /api/validation/computation:
    post:
      tags:
        - validation
      requestBody:
        description: Computation validation data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                formula:
                  type: string
                context:
                  type: object
                  additionalProperties:
                    nullable: true
                fieldType:
                  type: string
              required:
                - formula
                - context
      responses:
        "200":
          description: Computation validation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  result:
                    nullable: true
                  error:
                    type: string
                  dependencies:
                    type: array
                    items:
                      type: string
                required:
                  - isValid
                  - dependencies
        "400":
          description: Invalid computation
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  message:
                    type: string
                required:
                  - error
                  - message
  
  /api/statement-templates:
    post:
      tags:
        - statement-templates
      requestBody:
        description: Statement template data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                statementCode:
                  type: string
                  minLength: 1
                  maxLength: 50
                statementName:
                  type: string
                  minLength: 1
                  maxLength: 200
                lineItem:
                  type: string
                  minLength: 1
                  maxLength: 300
                lineCode:
                  type: string
                  maxLength: 50
                parentLineId:
                  type: integer
                displayOrder:
                  type: integer
                  minimum: 1
                level:
                  type: integer
                  minimum: 1
                  maximum: 10
                  default: 1
                isTotalLine:
                  type: boolean
                  default: false
                isSubtotalLine:
                  type: boolean
                  default: false
                eventMappings:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                calculationFormula:
                  type: string
                aggregationMethod:
                  type: string
                  maxLength: 50
                  default: SUM
                displayConditions:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                formatRules:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                isActive:
                  type: boolean
                  default: true
              required:
                - statementCode
                - statementName
                - lineItem
                - displayOrder
      responses:
        "201":
          description: The created statement template
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  statementCode:
                    type: string
                  statementName:
                    type: string
                  lineItem:
                    type: string
                  lineCode:
                    type: string
                    nullable: true
                  parentLineId:
                    type: integer
                    nullable: true
                  displayOrder:
                    type: integer
                  level:
                    type: integer
                  isTotalLine:
                    type: boolean
                  isSubtotalLine:
                    type: boolean
                  eventMappings:
                    type: object
                    additionalProperties:
                      nullable: true
                  calculationFormula:
                    type: string
                    nullable: true
                  aggregationMethod:
                    type: string
                  displayConditions:
                    type: object
                    additionalProperties:
                      nullable: true
                  formatRules:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - statementCode
                  - statementName
                  - lineItem
                  - lineCode
                  - parentLineId
                  - displayOrder
                  - level
                  - isTotalLine
                  - isSubtotalLine
                  - eventMappings
                  - calculationFormula
                  - aggregationMethod
                  - displayConditions
                  - formatRules
                  - metadata
                  - isActive
                  - createdAt
                  - updatedAt
        "400":
          description: Validation errors
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  validationErrors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
                  - validationErrors
  /api/statement-templates/{id}:
    put:
      tags:
        - statement-templates
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Complete statement template data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                statementCode:
                  type: string
                  minLength: 1
                  maxLength: 50
                statementName:
                  type: string
                  minLength: 1
                  maxLength: 200
                lineItem:
                  type: string
                  minLength: 1
                  maxLength: 300
                lineCode:
                  type: string
                  maxLength: 50
                parentLineId:
                  type: integer
                displayOrder:
                  type: integer
                  minimum: 1
                level:
                  type: integer
                  minimum: 1
                  maximum: 10
                  default: 1
                isTotalLine:
                  type: boolean
                  default: false
                isSubtotalLine:
                  type: boolean
                  default: false
                eventMappings:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                calculationFormula:
                  type: string
                aggregationMethod:
                  type: string
                  maxLength: 50
                  default: SUM
                displayConditions:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                formatRules:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                isActive:
                  type: boolean
                  default: true
              required:
                - statementCode
                - statementName
                - lineItem
                - displayOrder
      responses:
        "200":
          description: The updated statement template
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  statementCode:
                    type: string
                  statementName:
                    type: string
                  lineItem:
                    type: string
                  lineCode:
                    type: string
                    nullable: true
                  parentLineId:
                    type: integer
                    nullable: true
                  displayOrder:
                    type: integer
                  level:
                    type: integer
                  isTotalLine:
                    type: boolean
                  isSubtotalLine:
                    type: boolean
                  eventMappings:
                    type: object
                    additionalProperties:
                      nullable: true
                  calculationFormula:
                    type: string
                    nullable: true
                  aggregationMethod:
                    type: string
                  displayConditions:
                    type: object
                    additionalProperties:
                      nullable: true
                  formatRules:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - statementCode
                  - statementName
                  - lineItem
                  - lineCode
                  - parentLineId
                  - displayOrder
                  - level
                  - isTotalLine
                  - isSubtotalLine
                  - eventMappings
                  - calculationFormula
                  - aggregationMethod
                  - displayConditions
                  - formatRules
                  - metadata
                  - isActive
                  - createdAt
                  - updatedAt
        "400":
          description: Validation errors
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  validationErrors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                      required:
                        - field
                        - message
                required:
                  - message
                  - validationErrors
        "404":
          description: Statement template not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    patch:
      tags:
        - statement-templates
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Fields to update
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                statementCode:
                  type: string
                  minLength: 1
                  maxLength: 50
                statementName:
                  type: string
                  minLength: 1
                  maxLength: 200
                lineItem:
                  type: string
                  minLength: 1
                  maxLength: 300
                lineCode:
                  type: string
                  maxLength: 50
                parentLineId:
                  type: integer
                displayOrder:
                  type: integer
                  minimum: 1
                level:
                  type: integer
                  minimum: 1
                  maximum: 10
                  default: 1
                isTotalLine:
                  type: boolean
                  default: false
                isSubtotalLine:
                  type: boolean
                  default: false
                eventMappings:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                calculationFormula:
                  type: string
                aggregationMethod:
                  type: string
                  maxLength: 50
                  default: SUM
                displayConditions:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                formatRules:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                isActive:
                  type: boolean
                  default: true
      responses:
        "200":
          description: The updated statement template
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  statementCode:
                    type: string
                  statementName:
                    type: string
                  lineItem:
                    type: string
                  lineCode:
                    type: string
                    nullable: true
                  parentLineId:
                    type: integer
                    nullable: true
                  displayOrder:
                    type: integer
                  level:
                    type: integer
                  isTotalLine:
                    type: boolean
                  isSubtotalLine:
                    type: boolean
                  eventMappings:
                    type: object
                    additionalProperties:
                      nullable: true
                  calculationFormula:
                    type: string
                    nullable: true
                  aggregationMethod:
                    type: string
                  displayConditions:
                    type: object
                    additionalProperties:
                      nullable: true
                  formatRules:
                    type: object
                    additionalProperties:
                      nullable: true
                  metadata:
                    type: object
                    additionalProperties:
                      nullable: true
                  isActive:
                    type: boolean
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - id
                  - statementCode
                  - statementName
                  - lineItem
                  - lineCode
                  - parentLineId
                  - displayOrder
                  - level
                  - isTotalLine
                  - isSubtotalLine
                  - eventMappings
                  - calculationFormula
                  - aggregationMethod
                  - displayConditions
                  - formatRules
                  - metadata
                  - isActive
                  - createdAt
                  - updatedAt
        "404":
          description: Statement template not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
    delete:
      tags:
        - statement-templates
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      responses:
        "204":
          description: Statement template deleted successfully
        "404":
          description: Statement template not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
        "409":
          description: Cannot delete template due to dependencies
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  dependencies:
                    type: array
                    items:
                      type: string
                required:
                  - message
                  - dependencies
  /api/statement-templates/validate:
    post:
      tags:
        - statement-templates
      requestBody:
        description: Template to validate
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                statementCode:
                  type: string
                  minLength: 1
                  maxLength: 50
                statementName:
                  type: string
                  minLength: 1
                  maxLength: 200
                lineItem:
                  type: string
                  minLength: 1
                  maxLength: 300
                lineCode:
                  type: string
                  maxLength: 50
                parentLineId:
                  type: integer
                displayOrder:
                  type: integer
                  minimum: 1
                level:
                  type: integer
                  minimum: 1
                  maximum: 10
                  default: 1
                isTotalLine:
                  type: boolean
                  default: false
                isSubtotalLine:
                  type: boolean
                  default: false
                eventMappings:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                calculationFormula:
                  type: string
                aggregationMethod:
                  type: string
                  maxLength: 50
                  default: SUM
                displayConditions:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                formatRules:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
                  default: {}
                isActive:
                  type: boolean
                  default: true
              required:
                - statementCode
                - statementName
                - lineItem
                - displayOrder
      responses:
        "200":
          description: Validation results
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                        lineId:
                          type: number
                      required:
                        - field
                        - message
                  warnings:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                        lineId:
                          type: number
                      required:
                        - field
                        - message
                required:
                  - isValid
                  - errors
                  - warnings
  /api/statement-templates/bulk:
    post:
      tags:
        - statement-templates
      requestBody:
        description: Bulk template creation data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                templates:
                  type: array
                  items:
                    type: object
                    properties:
                      statementCode:
                        type: string
                        minLength: 1
                        maxLength: 50
                      statementName:
                        type: string
                        minLength: 1
                        maxLength: 200
                      lineItem:
                        type: string
                        minLength: 1
                        maxLength: 300
                      lineCode:
                        type: string
                        maxLength: 50
                      parentLineId:
                        type: integer
                      displayOrder:
                        type: integer
                        minimum: 1
                      level:
                        type: integer
                        minimum: 1
                        maximum: 10
                        default: 1
                      isTotalLine:
                        type: boolean
                        default: false
                      isSubtotalLine:
                        type: boolean
                        default: false
                      eventMappings:
                        type: object
                        additionalProperties:
                          nullable: true
                        default: {}
                      calculationFormula:
                        type: string
                      aggregationMethod:
                        type: string
                        maxLength: 50
                        default: SUM
                      displayConditions:
                        type: object
                        additionalProperties:
                          nullable: true
                        default: {}
                      formatRules:
                        type: object
                        additionalProperties:
                          nullable: true
                        default: {}
                      metadata:
                        type: object
                        additionalProperties:
                          nullable: true
                        default: {}
                      isActive:
                        type: boolean
                        default: true
                    required:
                      - statementCode
                      - statementName
                      - lineItem
                      - displayOrder
                validateOnly:
                  type: boolean
                  default: false
              required:
                - templates
      responses:
        "200":
          description: Validation results (when validateOnly=true)
          content:
            application/json:
              schema:
                type: object
                properties:
                  isValid:
                    type: boolean
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                        lineId:
                          type: number
                      required:
                        - field
                        - message
                  warnings:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                        message:
                          type: string
                        lineId:
                          type: number
                      required:
                        - field
                        - message
                required:
                  - isValid
                  - errors
                  - warnings
        "201":
          description: Bulk creation results
          content:
            application/json:
              schema:
                type: object
                properties:
                  created:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        statementCode:
                          type: string
                        statementName:
                          type: string
                        lineItem:
                          type: string
                        lineCode:
                          type: string
                          nullable: true
                        parentLineId:
                          type: integer
                          nullable: true
                        displayOrder:
                          type: integer
                        level:
                          type: integer
                        isTotalLine:
                          type: boolean
                        isSubtotalLine:
                          type: boolean
                        eventMappings:
                          type: object
                          additionalProperties:
                            nullable: true
                        calculationFormula:
                          type: string
                          nullable: true
                        aggregationMethod:
                          type: string
                        displayConditions:
                          type: object
                          additionalProperties:
                            nullable: true
                        formatRules:
                          type: object
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          additionalProperties:
                            nullable: true
                        isActive:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - statementCode
                        - statementName
                        - lineItem
                        - lineCode
                        - parentLineId
                        - displayOrder
                        - level
                        - isTotalLine
                        - isSubtotalLine
                        - eventMappings
                        - calculationFormula
                        - aggregationMethod
                        - displayConditions
                        - formatRules
                        - metadata
                        - isActive
                        - createdAt
                        - updatedAt
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        index:
                          type: number
                        error:
                          type: string
                      required:
                        - index
                        - error
                required:
                  - created
                  - errors
    patch:
      tags:
        - statement-templates
      requestBody:
        description: Bulk update data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                updates:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      data:
                        type: object
                        properties:
                          statementCode:
                            type: string
                            minLength: 1
                            maxLength: 50
                          statementName:
                            type: string
                            minLength: 1
                            maxLength: 200
                          lineItem:
                            type: string
                            minLength: 1
                            maxLength: 300
                          lineCode:
                            type: string
                            maxLength: 50
                          parentLineId:
                            type: integer
                          displayOrder:
                            type: integer
                            minimum: 1
                          level:
                            type: integer
                            minimum: 1
                            maximum: 10
                            default: 1
                          isTotalLine:
                            type: boolean
                            default: false
                          isSubtotalLine:
                            type: boolean
                            default: false
                          eventMappings:
                            type: object
                            additionalProperties:
                              nullable: true
                            default: {}
                          calculationFormula:
                            type: string
                          aggregationMethod:
                            type: string
                            maxLength: 50
                            default: SUM
                          displayConditions:
                            type: object
                            additionalProperties:
                              nullable: true
                            default: {}
                          formatRules:
                            type: object
                            additionalProperties:
                              nullable: true
                            default: {}
                          metadata:
                            type: object
                            additionalProperties:
                              nullable: true
                            default: {}
                          isActive:
                            type: boolean
                            default: true
                    required:
                      - id
                      - data
              required:
                - updates
      responses:
        "200":
          description: Bulk update results
          content:
            application/json:
              schema:
                type: object
                properties:
                  updated:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        statementCode:
                          type: string
                        statementName:
                          type: string
                        lineItem:
                          type: string
                        lineCode:
                          type: string
                          nullable: true
                        parentLineId:
                          type: integer
                          nullable: true
                        displayOrder:
                          type: integer
                        level:
                          type: integer
                        isTotalLine:
                          type: boolean
                        isSubtotalLine:
                          type: boolean
                        eventMappings:
                          type: object
                          additionalProperties:
                            nullable: true
                        calculationFormula:
                          type: string
                          nullable: true
                        aggregationMethod:
                          type: string
                        displayConditions:
                          type: object
                          additionalProperties:
                            nullable: true
                        formatRules:
                          type: object
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          additionalProperties:
                            nullable: true
                        isActive:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - statementCode
                        - statementName
                        - lineItem
                        - lineCode
                        - parentLineId
                        - displayOrder
                        - level
                        - isTotalLine
                        - isSubtotalLine
                        - eventMappings
                        - calculationFormula
                        - aggregationMethod
                        - displayConditions
                        - formatRules
                        - metadata
                        - isActive
                        - createdAt
                        - updatedAt
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        error:
                          type: string
                      required:
                        - id
                        - error
                required:
                  - updated
                  - errors
  /api/statement-templates/reorder:
    patch:
      tags:
        - statement-templates
      requestBody:
        description: Reorder data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                statementCode:
                  type: string
                reorderedItems:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      displayOrder:
                        type: integer
                      level:
                        type: integer
                      parentLineId:
                        type: integer
                    required:
                      - id
                      - displayOrder
              required:
                - statementCode
                - reorderedItems
      responses:
        "200":
          description: Reorder results
          content:
            application/json:
              schema:
                type: object
                properties:
                  updated:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        statementCode:
                          type: string
                        statementName:
                          type: string
                        lineItem:
                          type: string
                        lineCode:
                          type: string
                          nullable: true
                        parentLineId:
                          type: integer
                          nullable: true
                        displayOrder:
                          type: integer
                        level:
                          type: integer
                        isTotalLine:
                          type: boolean
                        isSubtotalLine:
                          type: boolean
                        eventMappings:
                          type: object
                          additionalProperties:
                            nullable: true
                        calculationFormula:
                          type: string
                          nullable: true
                        aggregationMethod:
                          type: string
                        displayConditions:
                          type: object
                          additionalProperties:
                            nullable: true
                        formatRules:
                          type: object
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          additionalProperties:
                            nullable: true
                        isActive:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - statementCode
                        - statementName
                        - lineItem
                        - lineCode
                        - parentLineId
                        - displayOrder
                        - level
                        - isTotalLine
                        - isSubtotalLine
                        - eventMappings
                        - calculationFormula
                        - aggregationMethod
                        - displayConditions
                        - formatRules
                        - metadata
                        - isActive
                        - createdAt
                        - updatedAt
                  message:
                    type: string
                required:
                  - updated
                  - message
        "400":
          description: Reorder validation errors
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: string
                required:
                  - message
                  - errors
  /api/statement-templates/codes:
    get:
      tags:
        - statement-templates
      responses:
        "200":
          description: Available statement codes
          content:
            application/json:
              schema:
                type: object
                properties:
                  codes:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: string
                        name:
                          type: string
                        description:
                          type: string
                      required:
                        - code
                        - name
                required:
                  - codes
  /api/statement-templates/{id}/duplicate:
    post:
      tags:
        - statement-templates
      parameters:
        - schema:
            type: number
            nullable: true
            required:
              - id
            example: 42
          required: true
          name: id
          in: path
      requestBody:
        description: Duplication parameters
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                newStatementCode:
                  type: string
                newStatementName:
                  type: string
                includeChildren:
                  type: boolean
                  default: true
              required:
                - newStatementCode
                - newStatementName
      responses:
        "201":
          description: Duplication results
          content:
            application/json:
              schema:
                type: object
                properties:
                  original:
                    type: object
                    properties:
                      id:
                        type: integer
                      statementCode:
                        type: string
                      statementName:
                        type: string
                      lineItem:
                        type: string
                      lineCode:
                        type: string
                        nullable: true
                      parentLineId:
                        type: integer
                        nullable: true
                      displayOrder:
                        type: integer
                      level:
                        type: integer
                      isTotalLine:
                        type: boolean
                      isSubtotalLine:
                        type: boolean
                      eventMappings:
                        type: object
                        additionalProperties:
                          nullable: true
                      calculationFormula:
                        type: string
                        nullable: true
                      aggregationMethod:
                        type: string
                      displayConditions:
                        type: object
                        additionalProperties:
                          nullable: true
                      formatRules:
                        type: object
                        additionalProperties:
                          nullable: true
                      metadata:
                        type: object
                        additionalProperties:
                          nullable: true
                      isActive:
                        type: boolean
                      createdAt:
                        type: string
                      updatedAt:
                        type: string
                    required:
                      - id
                      - statementCode
                      - statementName
                      - lineItem
                      - lineCode
                      - parentLineId
                      - displayOrder
                      - level
                      - isTotalLine
                      - isSubtotalLine
                      - eventMappings
                      - calculationFormula
                      - aggregationMethod
                      - displayConditions
                      - formatRules
                      - metadata
                      - isActive
                      - createdAt
                      - updatedAt
                  duplicated:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        statementCode:
                          type: string
                        statementName:
                          type: string
                        lineItem:
                          type: string
                        lineCode:
                          type: string
                          nullable: true
                        parentLineId:
                          type: integer
                          nullable: true
                        displayOrder:
                          type: integer
                        level:
                          type: integer
                        isTotalLine:
                          type: boolean
                        isSubtotalLine:
                          type: boolean
                        eventMappings:
                          type: object
                          additionalProperties:
                            nullable: true
                        calculationFormula:
                          type: string
                          nullable: true
                        aggregationMethod:
                          type: string
                        displayConditions:
                          type: object
                          additionalProperties:
                            nullable: true
                        formatRules:
                          type: object
                          additionalProperties:
                            nullable: true
                        metadata:
                          type: object
                          additionalProperties:
                            nullable: true
                        isActive:
                          type: boolean
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - statementCode
                        - statementName
                        - lineItem
                        - lineCode
                        - parentLineId
                        - displayOrder
                        - level
                        - isTotalLine
                        - isSubtotalLine
                        - eventMappings
                        - calculationFormula
                        - aggregationMethod
                        - displayConditions
                        - formatRules
                        - metadata
                        - isActive
                        - createdAt
                        - updatedAt
                required:
                  - original
                  - duplicated
        "404":
          description: Template to duplicate not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
                example:
                  message: Not Found
